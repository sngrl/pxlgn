/**
 * IPS Social Suite 4
 * (c) 2013 Invision Power Services - http://www.invisionpower.com
 * This file contains minified javascript and is not directly editable
 */

;(function($,_,undefined){"use strict";ips.controller.register('core.admin.system.buildApp',{initialize:function(){this.on('click',this.launchAlert);},launchAlert:function(e){var self=this;e.preventDefault();ips.ui.alert.show({type:'verify',message:ips.getString('build_app'),icon:'question',buttons:{yes:ips.getString('build_download'),no:ips.getString('download'),cancel:ips.getString('cancel')},callbacks:{yes:function(){window.location=self.scope.attr('data-buildURL');},no:function(){window.location=self.scope.attr('data-downloadURL');}}});}});}(jQuery,_));;
;(function($,_,undefined){"use strict";ips.controller.register('core.admin.system.codeHook',{codeMirror:null,initialize:function(){this.on('click','[data-codeToInject]',this._itemClick);},_itemClick:function(e){var codeMirror=$(this.scope).find('textarea').data('CodeMirrorInstance');var regex=new RegExp($.parseJSON($(e.currentTarget).attr('data-signature')));var found=false;var lastLine=codeMirror.doc.lineCount()-1;codeMirror.doc.eachLine(function(line){if(line.text.match(regex)){found=true;codeMirror.setSelection({line:codeMirror.doc.getLineNumber(line),ch:0},{line:codeMirror.doc.getLineNumber(line),ch:line.text.length});codeMirror.scrollIntoView({line:codeMirror.doc.getLineNumber(line),ch:0});}
if(line.text.match(/^\s*}\s*$/)){lastLine=codeMirror.doc.getLineNumber(line);}});if(!found){codeMirror.doc.replaceRange($.parseJSON($(e.currentTarget).attr('data-codeToInject')),{line:lastLine-1,chr:0},{line:lastLine-1,chr:0});codeMirror.scrollIntoView({line:codeMirror.doc.lineCount(),ch:0});}}});}(jQuery,_));;
;(function($,_,undefined){"use strict";ips.controller.register('core.admin.system.langString',{initialize:function(){this.on('click','[data-action="saveWords"]',this.saveWords);this.on('click','[data-action="revertWords"]',this.revertWords);this.setup();},setup:function(){var self=this;var textArea=$('<textarea />');textArea.attr('data-url',this.scope.attr('href')).val(this.scope.html()).change(function(e){self._change(e);});},_change:function(e){var elem=$(e.target);elem.addClass('ipsField_loading');var url=elem.attr('data-url')+'&form_submitted=1&csrfKey='+ips.getSetting('csrfKey')+'&lang_word_custom='+encodeURIComponent(elem.val());ips.getAjax()(url).done(function(){elem.removeClass('ipsField_loading');ips.ui.flashMsg.show(ips.getString('saved'));}).fail(function(){window.location=url;});}});}(jQuery,_));;
;(function($,_,undefined){"use strict";ips.controller.register('core.admin.system.login',{initialize:function(){this.on('tabChanged',this.tabChanged);this.setup();},setup:function(){this.scope.find("#elTabContent .ipsTabs_panel:visible").first().find('input[type="text"]').first().focus();},tabChanged:function(e,data){ips.utils.cookie.set('acpLoginMethod',data.tabID,1);}});}(jQuery,_));;
;(function($,_,undefined){"use strict";ips.controller.register('core.admin.system.themeHook',{initialize:function(){var scope=this.scope;scope.find('[data-action="showTemplate"]').removeClass('ipsHide');this.on('openDialog',function(e,data){$('#'+data.dialogID).on('click','li[data-selector]',function(e){e.stopPropagation();ips.ui.dialog.getObj(scope.find('[data-action="showTemplate"]')).hide();scope.find('input[name="plugin_theme_hook_selector"]').val($(e.currentTarget).attr('data-selector'));})});},});}(jQuery,_));;
;(function($,_,undefined){"use strict";ips.controller.register('core.admin.system.themeHookEditor',{initialize:function(){this.on('click','a[data-action="templateLink"]',this._itemClick);},_itemClick:function(e){e.preventDefault();var themeHookWindow=$(this.scope).find('[data-role="themeHookWindow"]');var sidebar=$(this.scope).find('[data-role="themeHookSidebar"]');var target=$(e.currentTarget);History.replaceState({},document.title,target.attr('href'));themeHookWindow.children('[data-template],[data-role="themeHookWindowPlaceholder"]').hide();themeHookWindow.addClass('ipsLoading');sidebar.find('.cHookEditor_activeTemplate').removeClass('cHookEditor_activeTemplate');if(themeHookWindow.children('[data-template="'+target.text()+'"]').length){themeHookWindow.children('[data-template="'+target.text()+'"]').show();}else{ips.getAjax()(target.attr('href')+'&editor=1').done(function(response){themeHookWindow.append("<div class='cHookEditor_content' data-template='"+target.text()+"'>"+response+'</div>');$(document).trigger('contentChange',[themeHookWindow]);}).fail(function(){window.location=target.attr('href');})}
target.addClass('cHookEditor_activeTemplate');themeHookWindow.removeClass('ipsLoading');}});}(jQuery,_));;
;(function($,_,undefined){"use strict";ips.controller.register('core.admin.system.themeHookTemplate',{initialize:function(){this.on('click','li[data-selector]',this._itemClick);},_itemClick:function(e){this.trigger($(e.currentTarget),'templateClicked');}});}(jQuery,_));;