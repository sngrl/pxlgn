"namespace IPS\\Theme;\nclass class_core_global_editor\n{\n\t\t\tfunction attachedFile( $url, $title, $pTag=TRUE ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $pTag ):\n$return .= <<<CONTENT\n<p>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<a class=\"ipsAttachLink\" href=\"\nCONTENT;\n$return .= htmlentities( $url, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n$return .= htmlentities( $title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\nCONTENT;\n\nif ( $pTag ):\n$return .= <<<CONTENT\n<\/p>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction attachedImage( $url, $thumbnail, $title, $id ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n<p><a href=\"\nCONTENT;\n$return .= htmlentities( $url, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsAttachLink ipsAttachLink_image\"><img data-fileid=\"\nCONTENT;\n$return .= htmlentities( $id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" src=\"\nCONTENT;\n$return .= htmlentities( $thumbnail, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsImage ipsImage_thumbnailed\" alt=\"\nCONTENT;\n$return .= htmlentities( $title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"><\/a><\/p>\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction fakeFormTemplate( $id, $action, $tabs, $hiddenValues, $actionButtons, $uploadField ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n<form accept-charset='utf-8' action=\"\nCONTENT;\n$return .= htmlentities( $action, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" method=\"post\" \nCONTENT;\n\nif ( $uploadField ):\n$return .= <<<CONTENT\nenctype=\"multipart\/form-data\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t<input type=\"hidden\" name=\"\nCONTENT;\n$return .= htmlentities( $id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_submitted\" value=\"1\">\n\t\nCONTENT;\n\nforeach ( $hiddenValues as $k => $v ):\n$return .= <<<CONTENT\n\n\t\t<input type=\"hidden\" name=\"\nCONTENT;\n$return .= htmlentities( $k, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" value=\"\nCONTENT;\n$return .= htmlentities( $v, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nif ( $uploadField ):\n$return .= <<<CONTENT\n\n\t\t<input type=\"hidden\" name=\"MAX_FILE_SIZE\" value=\"\nCONTENT;\n$return .= htmlentities( $uploadField, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t<input type=\"hidden\" name=\"plupload\" value=\"\nCONTENT;\n$return .= htmlspecialchars( md5( uniqid() ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nforeach ( $tabs as $elements ):\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nforeach ( $elements as $element ):\n$return .= <<<CONTENT\n\n\t\t\t{$element->html()}\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n<\/form>\n\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction image( $editorId, $width, $height, $maximumWidth, $maximumHeight, $border, $margin, $float, $link ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n<div class=\"ipsPad ipsForm ipsForm_vertical\" data-controller=\"core.global.editor.image\" data-editorid='\nCONTENT;\n$return .= htmlentities( $editorId, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t<form method='get' action='#'>\n\t\t<div class=\"ipsPad\">\n\t\t\t<div class=\"ipsFieldRow ipsFieldRow_primary\">\n\t\t\t\t<label class='ipsFieldRow_title'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'image_size', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/label>\n\t\t\t\t<input type=\"number\" class=\"ipsField_short\" value=\"\nCONTENT;\n$return .= htmlentities( $width, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" max=\"\nCONTENT;\n$return .= htmlentities( $maximumWidth, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-role=\"imageWidth\"> &times; <input type=\"number\" class=\"ipsField_short\" value=\"\nCONTENT;\n$return .= htmlentities( $height, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" max=\"\nCONTENT;\n$return .= htmlentities( $maximumHeight, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-role=\"imageHeight\"> \nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'px', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t<br>\n\t\t\t\t<span class=\"ipsType_warning\" data-role=\"imageSizeWarning\"><\/span>\n\t\t\t<\/div>\n\t\t\t<div class=\"ipsFieldRow ipsFieldRow_primary\">\n\t\t\t\t<label class='ipsFieldRow_title'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'image_border', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/label>\n\t\t\t\t<input type=\"text\" class=\"ipsField_tiny\" value=\"\nCONTENT;\n$return .= htmlentities( $border, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-role=\"imageBorder\"> px\n\t\t\t<\/div>\n\t\t\t<div class=\"ipsFieldRow ipsFieldRow_primary\">\n\t\t\t\t<label class='ipsFieldRow_title'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'image_margin', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/label>\n\t\t\t\t<input type=\"text\" class=\"ipsField_tiny\" value=\"\nCONTENT;\n$return .= htmlentities( $margin, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-role=\"imageMargin\"> px\n\t\t\t<\/div>\n\t\t\t<div class=\"ipsFieldRow ipsFieldRow_primary\">\n\t\t\t\t<label class='ipsFieldRow_title'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'image_align', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/label>\n\t\t\t\t<ul class='ipsFieldRow_content ipsList_reset'>\n\t\t\t\t\t<li class='ipsFieldRow_inlineCheckbox'>\n\t\t\t\t\t\t<input type='radio' name=\"image_align\" value=\"\" id='image_align_none' data-role=\"imageAlign\" \nCONTENT;\n\nif ( $float != 'left' and $float != 'right' ):\n$return .= <<<CONTENT\nchecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n> <label for='image_align_none'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'none', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/label>\n\t\t\t\t\t<\/li>\n\t\t\t\t\t<li class='ipsFieldRow_inlineCheckbox'>\n\t\t\t\t\t\t<input type='radio' name=\"image_align\" value=\"left\" id='image_align_left' data-role=\"imageAlign\" \nCONTENT;\n\nif ( $float == 'left' ):\n$return .= <<<CONTENT\nchecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n> <label for='image_align_left'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'image_align_left', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/label>\n\t\t\t\t\t<\/li>\n\t\t\t\t\t<li class='ipsFieldRow_inlineCheckbox'>\n\t\t\t\t\t\t<input type='radio' name=\"image_align\" value=\"right\" id='image_align_right' data-role=\"imageAlign\" \nCONTENT;\n\nif ( $float == 'right' ):\n$return .= <<<CONTENT\nchecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n> <label for='image_align_right'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'image_align_right', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/label>\n\t\t\t\t\t<\/li>\n\t\t\t\t<\/ul>\n\t\t\t<\/div>\n\t\t\t<div class=\"ipsFieldRow ipsFieldRow_primary\">\n\t\t\t\t<label class='ipsFieldRow_title'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'image_link', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/label>\n\t\t\t\t<input type=\"text\" class=\"\" value=\"\nCONTENT;\n$return .= htmlentities( $link, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-role=\"imageLink\">\n\t\t\t<\/div>\n\t\t\t<br>\n\t\t\t<div class='ipsFieldRow'>\n\t\t\t\t<button type='submit' class=\"ipsButton ipsButton_primary\">\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'update', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/button>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/form>\n<\/div>\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction link( $val, $editorId ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n<div class=\"ipsPad ipsForm ipsForm_vertical\" data-controller='core.global.editor.link' data-editorid='\nCONTENT;\n$return .= htmlentities( $editorId, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' \nCONTENT;\n\nif ( \\IPS\\Request::i()->image ):\n$return .= <<<CONTENT\ndata-image=\"1\"\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\ndata-image=\"0\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t<form method='get' action='#'>\n\t\t<div class=\"ipsPad ipsAreaBackground_light\">\n\t\t\t<div class=\"ipsFieldRow ipsFieldRow_fullWidth ipsFieldRow_primary\">\n\t\t\t\t<label for='elLinkURL\nCONTENT;\n$return .= htmlentities( $editorId, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsFieldRow_title'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'url', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/label>\n\t\t\t\t<input type=\"text\" id='elLinkURL\nCONTENT;\n$return .= htmlentities( $editorId, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class=\"ipsField_fullWidth ipsField_primary cEditorURL\" placeholder=\"\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'editor_link_url_label', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-role=\"linkURL\" value=\"\nCONTENT;\n$return .= htmlentities( $val, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" autofocus>\n\t\t\t<\/div>\n\t\t\t\nCONTENT;\n\nif ( !\\IPS\\Request::i()->image ):\n$return .= <<<CONTENT\n\n\t\t\t\t<div class=\"ipsFieldRow ipsFieldRow_fullWidth\" data-role=\"linkTextRow\">\n\t\t\t\t\t<label for='elLinkText\nCONTENT;\n$return .= htmlentities( $editorId, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsFieldRow_title'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'editor_link_text', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/label>\n\t\t\t\t\t<input type=\"text\" id='elLinkText\nCONTENT;\n$return .= htmlentities( $editorId, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class=\"ipsField_fullWidth cEditorURL\" placeholder=\"\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'editor_link_text_label', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-role=\"linkText\" \nCONTENT;\n\nif ( \\IPS\\Request::i()->title ):\n$return .= <<<CONTENT\nvalue=\"\nCONTENT;\n$return .= htmlspecialchars( \\IPS\\Request::i()->title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nvalue=\"\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t\t\t\t<\/div>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsFieldRow'>\n\t\t\t\t<button type='submit' class=\"ipsButton ipsButton_primary cEditorURLButton cEditorURLButtonInsert\" data-action=\"linkButton\">\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'editor_media_insert', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/button>\n\t\t\t\t\nCONTENT;\n\nif ( $val ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t&nbsp;\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'or', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n&nbsp;\n\t\t\t\t\t<button type=\"button\" class=\"ipsButton ipsButton_light ipsButton_small\" data-action=\"linkRemoveButton\">\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'editor_link_remove', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/button>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/form>\n<\/div>\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction mentionRow( $member ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n<li class='ipsMenu_item ipsCursor_pointer' data-mentionhref='\nCONTENT;\n$return .= htmlentities( $member->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-mentionid='\nCONTENT;\n$return .= htmlentities( $member->member_id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-mentionhover='\nCONTENT;\n$return .= htmlentities( $member->url()->setQueryString('do', 'hovercard'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t<a>\n\t\t<img src='\nCONTENT;\n$return .= htmlentities( $member->photo, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' alt='' class='ipsUserPhoto ipsUserPhoto_mini'>\n\t\t<span class=\"ipsPad_half\" data-role='mentionname'>\nCONTENT;\n$return .= htmlentities( $member->name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t<\/a>\n<\/li>\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction myMedia( $editorId, $mediaSources, $currentMediaSource, $url, $results ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n<div class=\"cMyMedia\" data-controller='core.global.editor.mymedia, core.global.editor.insertable' data-editorid='\nCONTENT;\n$return .= htmlentities( $editorId, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t<div id=\"elEditor\nCONTENT;\n$return .= htmlentities( $editorId, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\nAttach\" class=\"ipsColumns ipsColumns_collapsePhone\"  data-ipsTabBar data-ipsTabBar-contentArea='#elEditor\nCONTENT;\n$return .= htmlentities( $editorId, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\nAttachTabContent' data-ipsTabBar-itemSelector=\".ipsSideMenu_item\" data-ipsTabBar-activeClass=\"ipsSideMenu_itemActive\" data-ipsTabBar-updateURL=\"false\">\n\t\t\nCONTENT;\n\nif ( count ( $mediaSources ) > 1 ):\n$return .= <<<CONTENT\n\n\t\t\t<div class=\"ipsColumn ipsColumn_medium\">\n\t\t\t\t<div class=\"ipsSideMenu ipsPad\" id='elAttachmentsMenu_\nCONTENT;\n$return .= htmlentities( $editorId, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsSideMenu>\n\t\t\t\t\t<h3 class='ipsSideMenu_mainTitle ipsAreaBackground_light ipsType_medium'>\n\t\t\t\t\t\t<a href='#elAttachmentsMenu_\nCONTENT;\n$return .= htmlentities( $editorId, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsPad_double' data-action='openSideMenu'><i class='fa fa-bars'><\/i> &nbsp;\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'editor_attachment_location', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n&nbsp;<i class='fa fa-caret-down'><\/i><\/a>\n\t\t\t\t\t<\/h3>\n\t\t\t\t\t<ul class=\"ipsSideMenu_list\">\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $mediaSources as $k ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=editor&do=myMedia&tab={$k}&existing=1\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\" id=\"elEditor\nCONTENT;\n$return .= htmlentities( $editorId, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\nAttachTabMedia\nCONTENT;\n$return .= htmlentities( $k, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsSideMenu_item \nCONTENT;\n\nif ( $currentMediaSource == $k ):\n$return .= <<<CONTENT\nipsSideMenu_itemActive\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\nCONTENT;\n$val = \"editorMedia_{$k}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/ul>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<div class=\"ipsColumn ipsColumn_fluid\">\n\t\t\t<div id=\"elEditor\nCONTENT;\n$return .= htmlentities( $editorId, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\nAttachTabContent\" data-role=\"myMediaContent\" class='ipsPad'>\n\t\t\t\t{$results}\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/div>\n\t<div class='ipsPad ipsAreaBackground cMyMedia_controls'>\n\t\t<ul class='ipsList_inline ipsType_right'>\n\t\t\t<li><a href='#' data-action=\"clearAll\" class='ipsButton ipsButton_verySmall ipsButton_veryLight ipsButton_disabled'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'editor_clear_selection', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t<li><a href='#' data-action=\"insertSelected\" class='ipsButton ipsButton_verySmall ipsButton_normal ipsButton_disabled'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'editor_image_upload_insert_selected', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t<\/ul>\n\t<\/div>\n<\/div>\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction myMediaContent( $files, $pagination, $url ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n<div data-controller='core.global.editor.mymediasection' data-url=\"\nCONTENT;\n$return .= htmlentities( $url, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n&search=1\">\n\t<div class='ipsAreaBackground ipsPad_half'>\n\t\t<input type=\"search\" class=\"ipsField_fullWidth\" placeholder=\"\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'editor_media_search', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-role=\"myMediaSearch\">\n\t<\/div>\n\t<div data-role=\"myMediaResults\">\n\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"editor\", \"core\", 'global' )->myMediaResults( $files, $pagination, $url );\n$return .= <<<CONTENT\n\n\t<\/div>\t\n<\/div>\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction myMediaResults( $files, $pagination, $url ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\nCONTENT;\n\nif ( empty($files) ):\n$return .= <<<CONTENT\n\n\t<div class='ipsPad ipsAreaBackground_light'>\n\t\t\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_results', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t<\/div>\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t<div class=\"ipsGrid ipsAttachment_fileList\">\n\t\t\nCONTENT;\n\nforeach ( $files as $url => $file ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"forms\", \\IPS\\Request::i()->app, 'global' )->uploadFile( $url, $file, NULL, TRUE, FALSE, $url );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/div>\n\t<br>\n\t{$pagination}\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\t\treturn $return;\n}}"