"namespace IPS\\Theme;\nclass class_core_front_profile\n{\n\t\t\tfunction allFollowers( $member, $followers ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\nCONTENT;\n\nif ( !\\IPS\\Request::i()->isAjax() ):\n$return .= <<<CONTENT\n\n\t<h3 class='ipsType_sectionHead'>\nCONTENT;\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_followers', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/h3>\n\t<br>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( $followers !== NULL AND $followers->count( TRUE ) > 50 ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\n$url = \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&do=followers&id={$member->member_id}\", 'front', 'profile_followers', $member->members_seo_name );\n$return .= <<<CONTENT\n\n\t<div class=\"ipsButtonBar ipsPad_half ipsClearfix ipsClear\">\n\t\t<div data-role=\"tablePagination\">\n\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->pagination( $url, ceil( $followers->count( TRUE ) \/ 50 ), \\IPS\\Request::i()->page ?: 1, 50 );\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<br>\n<ul class='ipsDataList'>\n\t\nCONTENT;\n\nif ( count( $followers ) ):\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nforeach ( $followers AS $follower ):\n$return .= <<<CONTENT\n\n\t\t\t<li class='ipsDataItem ipsClearfix \nCONTENT;\n\nif ( $follower['follow_is_anon'] ):\n$return .= <<<CONTENT\nipsFaded\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t<div class='ipsDataItem_icon ipsPos_top'>\n\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( \\IPS\\Member::load($follower['follow_member_id']), 'tiny', NULL, '', FALSE );\n$return .= <<<CONTENT\n<br>\n\t\t\t\t<\/div>\n\t\t\t\t<div class='ipsDataItem_main'>\n\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id != $follower['follow_member_id'] and ( !\\IPS\\Member::load($follower['follow_member_id'])->members_bitoptions['pp_setting_moderate_followers'] or \\IPS\\Member::loggedIn()->following( 'core', 'member', $follower['follow_member_id'] ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\n$thisFollowers = \\IPS\\Member::load( $follower['follow_member_id'] )->followers();\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='ipsPos_right'>\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\" )->memberFollow( 'core', 'member', $follower['follow_member_id'], ( $thisFollowers === NULL ) ? 0 : $thisFollowers->count( TRUE ), TRUE );\n$return .= <<<CONTENT\n<\/div>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<strong class='ipsDataItem_title'>\nCONTENT;\n$return .= \\IPS\\Member::load($follower['follow_member_id'])->link();\n$return .= <<<CONTENT\n<\/strong> \nCONTENT;\n\nif ( $follower['follow_is_anon'] ):\n$return .= <<<CONTENT\n \nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'anon_follower', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<br>\n\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Member\\Group::load( \\IPS\\Member::load($follower['follow_member_id'])->member_group_id )->formattedName;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/div>\n\t\t\t<\/li>\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/ul>\n\nCONTENT;\n\nif ( $followers !== NULL AND $followers->count( TRUE ) > 50 ):\n$return .= <<<CONTENT\n\n\t<br>\n\t<div class=\"ipsButtonBar ipsPad_half ipsClearfix ipsClear\">\n\t\t<div data-role=\"tablePagination\">\n\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->pagination( $url, ceil( $followers->count( TRUE ) \/ 50 ), \\IPS\\Request::i()->page ?: 1, 50 );\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction followers( $member, $followers ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n<div class='ipsPad'>\n\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id === $member->member_id ):\n$return .= <<<CONTENT\n\n\t\t<a href='#elFollowPref_menu' data-role='followOption' data-ipsMenu data-ipsMenu-selectable='radio' data-ipsMenu-appendTo='#elFollowers' id='elFollowPref' class='ipsType_small ipsPos_right'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'options', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-right'><\/i><\/a>\n\t\t<ul id='elFollowPref_menu' class='ipsMenu ipsMenu_selectable ipsMenu_normal ipsHide'>\n\t\t\t<li data-ipsMenuValue='enable' class='ipsMenu_item \nCONTENT;\n\nif ( !$member->members_bitoptions['pp_setting_moderate_followers'] ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t<a href='\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&id={$member->member_id}&do=changeFollow&enabled=1\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"profile\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'allow_follow', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t<\/li>\n\t\t\t<li data-ipsMenuValue='disable' class='ipsMenu_item \nCONTENT;\n\nif ( $member->members_bitoptions['pp_setting_moderate_followers'] ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t<a href='\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&id={$member->member_id}&do=changeFollow&enabled=0\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"profile\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'disallow_follow', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t<\/li>\n\t\t\t<li class='ipsMenu_sep'><hr><\/li>\n\t\t\t<li class='ipsPad_half ipsType_center ipsType_light ipsType_medium'>\n\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'follow_setting_desc', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t<\/li>\n\t\t<\/ul>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<h2 class='ipsType_sectionHead ipsType_reset'>\nCONTENT;\n$pluralize = array( ($followers !== NULL) ? $followers->count( TRUE ) : 0 ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'x_followers', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n<\/h2>\n\t<br><br>\n\t\nCONTENT;\n\nif ( count( $followers ) ):\n$return .= <<<CONTENT\n\n\t\t<ul class='ipsGrid'>\n\t\t\t\nCONTENT;\n\nforeach ( $followers as $idx => $follower ):\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $idx <= 11 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li class='ipsGrid_span3 ipsType_center \nCONTENT;\n\nif ( $follower['follow_is_anon'] ):\n$return .= <<<CONTENT\nipsFaded\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-ipsTooltip title='\nCONTENT;\n$return .= htmlspecialchars( \\IPS\\Member::load( $follower['follow_member_id'] )->name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $follower['follow_is_anon'] ):\n$return .= <<<CONTENT\n \nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'anon_follower', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( \\IPS\\Member::load($follower['follow_member_id']), 'mini', NULL, '', FALSE );\n$return .= <<<CONTENT\n<\/li>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t<p class='ipsType_center ipsType_light'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_followers_yet', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/p>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/div>\n\nCONTENT;\n\nif ( $followers !== NULL and $followers->count( TRUE ) > 12 ):\n$return .= <<<CONTENT\n\n\t<p class='ipsType_right ipsType_reset ipsPad_half ipsType_small ipsType_light ipsAreaBackground_light'>\n\t\t<a href='\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&do=followers&id={$member->member_id}\", null, \"profile_followers\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n' class='ipsType_blendLinks'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'see_all_followers', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-right'><\/i><\/a>\n\t<\/p>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction hovercard( $member, $addWarningUrl ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\nCONTENT;\n\n$rnd = uniqid();\n$return .= <<<CONTENT\n\n\nCONTENT;\n\n$coverPhoto = $member->coverPhoto();\n$return .= <<<CONTENT\n\n<!-- When altering this template be sure to also check for similar in main profile view -->\n<div class=\"ipsPad_half cUserHovercard\" id=\"elUserHovercard_\nCONTENT;\n$return .= htmlentities( $member->member_id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlentities( $rnd, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t<div class='ipsPageHead_special' id='elProfileHeader_\nCONTENT;\n$return .= htmlentities( $rnd, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-controller='core.front.core.coverPhoto' data-url=\"\nCONTENT;\n$return .= htmlentities( $member->url()->csrf(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-coverOffset='\nCONTENT;\n$return .= htmlentities( $coverPhoto->offset, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\nCONTENT;\n\nif ( $coverPhoto->file ):\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsCoverPhoto_container'>\n\t\t\t\t<img src='\nCONTENT;\n$return .= htmlentities( $coverPhoto->file, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsCoverPhoto_photo' alt=''>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<a href='\nCONTENT;\n$return .= htmlentities( $member->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><img src='\nCONTENT;\n$return .= htmlentities( $member->photo, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class=\"ipsUserPhoto ipsUserPhoto_medium\"><\/a>\n\t\t<h2 class=\"ipsType_reset ipsType_sectionHead ipsTruncate ipsTruncate_line ipsType_blendLinks\"><a href='\nCONTENT;\n$return .= htmlentities( $member->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlentities( $member->name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a><\/h2>\n\t\t<p class='ipsType_reset ipsType_normal'>\nCONTENT;\n$return .= \\IPS\\Member\\Group::load( $member->member_group_id )->formattedName;\n$return .= <<<CONTENT\n<\/p>\n\t<\/div>\n\t<br>\n\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->reputationBadge( $member );\n$return .= <<<CONTENT\n\n\t<div class='cUserHovercard_data'>\n\t\t<ul class=\"ipsDataList ipsDataList_reducedSpacing\">\n\t\t\t<li class=\"ipsDataItem\">\n\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_size3\"><strong>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_member_posts', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t<span class=\"ipsDataItem_main\">\nCONTENT;\n$return .= htmlentities( $member->member_posts, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<\/li>\n\t\t\t<li class=\"ipsDataItem\">\n\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_size3\"><strong>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_joined', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t<span class=\"ipsDataItem_main\">\nCONTENT;\n$val = ( $member->joined instanceof \\IPS\\DateTime ) ? $member->joined : \\IPS\\DateTime::ts( $member->joined );$return .= $val->html();\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<\/li>\n\t\t\t<li class=\"ipsDataItem\">\n\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_size3\"><strong>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_last_visit', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t<span class=\"ipsDataItem_main\">\n\t\t\t\t\t\nCONTENT;\n\nif ( $member->isOnline() ):\n$return .= <<<CONTENT\n<i class=\"fa fa-circle ipsOnlineStatus_online\" data-ipsTooltip title=\"\nCONTENT;\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'online_now', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\"><\/i>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( $member->last_activity ):\n$return .= <<<CONTENT\n\nCONTENT;\n$val = ( $member->last_activity instanceof \\IPS\\DateTime ) ? $member->last_activity : \\IPS\\DateTime::ts( $member->last_activity );$return .= $val->html();\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'never', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/span>\n\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nif ( $member->isOnline() AND $member->location ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li class=\"ipsDataItem\">\n\t\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_size3\"><strong>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'online_users_location_lang', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t\t<span class=\"ipsDataItem_main\">{$member->location()}<\/span>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->modPermission('can_see_emails') ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li class=\"ipsDataItem\">\n\t\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_size3\"><strong>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'email', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t\t<span class=\"ipsDataItem_main\">\nCONTENT;\n$return .= htmlentities( $member->email, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->modPermission('mod_see_warn') ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li class=\"ipsDataItem\">\n\t\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_size3\"><strong>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'member_warnings', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t\t<span class=\"ipsDataItem_main\">\nCONTENT;\n$return .= htmlentities( $member->warn_level, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t<\/div>\n\t<br>\n\t<div class=\"ipsAreaBackground ipsPad ipsClearfix\">\n\t\t<ul class=\"ipsList_inline ipsType_blendLinks\">\n\t\t\t\nCONTENT;\n\nif ( !$member->members_disable_pm and !\\IPS\\Member::loggedIn()->members_disable_pm ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li><a href='\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=messaging&controller=messenger&do=compose&to={$member->member_id}\", null, \"messenger_compose\", array(), 0 ) );\n$return .= <<<CONTENT\n' data-ipsDialog data-ipsDialog-title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'compose_new', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsDialog-remoteSubmit data-ipsDialog-flashMessage=\"\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'message_sent', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-ipsDialog-forceReload><i class='fa fa-envelope'><\/i> \nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'message_send', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id && $member->member_id != \\IPS\\Member::loggedIn()->member_id ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li><a href=\"\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=ignore&id={$member->member_id}\", null, \"ignore\", array(), 0 ) );\n$return .= <<<CONTENT\n\"><i class='fa fa-times-circle'><\/i> \nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'add_ignore', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<li><a href=\"\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&do=edit&id={$member->member_id}\", \"front\", \"profile_content\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n\"><i class='fa fa-search'><\/i> \nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'find_content', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\nCONTENT;\n\nif ( ( \\IPS\\Member::loggedIn()->modPermission('can_flag_as_spammer') AND $member->member_id != \\IPS\\Member::loggedIn()->member_id ) || \\IPS\\Member::loggedIn()->canWarn( $member ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li class=\"ipsPos_right\">\n\t\t\t\t\t<a href=\"#elUserHovercard_\nCONTENT;\n$return .= htmlentities( $member->member_id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_more_menu\" id=\"elUserHovercard_\nCONTENT;\n$return .= htmlentities( $member->member_id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlentities( $rnd, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_more\" title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'more_options', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsTooltip data-ipsMenu data-ipsMenu-appendTo=\"#elUserHovercard_\nCONTENT;\n$return .= htmlentities( $member->member_id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlentities( $rnd, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t<i class=\"fa fa-cog ipsType_large\"><\/i> <i class=\"fa fa-caret-down\"><\/i>\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t\t\nCONTENT;\n\nif ( ( \\IPS\\Member::loggedIn()->modPermission('can_flag_as_spammer') AND $member->member_id != \\IPS\\Member::loggedIn()->member_id ) || \\IPS\\Member::loggedIn()->canWarn( $member ) ):\n$return .= <<<CONTENT\n\n\t\t\t<ul class=\"ipsMenu ipsMenu_narrow ipsHide\" id=\"elUserHovercard_\nCONTENT;\n$return .= htmlentities( $member->member_id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlentities( $rnd, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_more_menu\">\n\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->modPermission('can_flag_as_spammer') AND $member->member_id != \\IPS\\Member::loggedIn()->member_id ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( $member->members_bitoptions['bw_is_spammer'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li class=\"ipsMenu_item\"><a href='\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=moderation&id={$member->member_id}&s=0\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"flag_as_spammer\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n' data-confirm data-confirmSubMessage=\"\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_unflag_confirm', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\"><i class=\"fa fa-flag\"><\/i> \nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_unflag', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li class=\"ipsMenu_item\"><a href='\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=moderation&id={$member->member_id}&s=1\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"flag_as_spammer\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n' data-confirm><i class=\"fa fa-flag\"><\/i> \nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_flag', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\t\t\t\t\t\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->canWarn( $member ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li class=\"ipsMenu_item\"><a href=\"\nCONTENT;\n$return .= htmlentities( $addWarningUrl, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'warn_user_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsDialog data-ipsDialog-title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'warn_user', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><i class=\"fa fa-exclamation-triangle\"><\/i> \nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'warn_user', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/div>\n<\/div>\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction memberFollow( $app, $area, $id, $count, $small=FALSE ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div data-followApp='\nCONTENT;\n$return .= htmlentities( $app, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-followArea='\nCONTENT;\n$return .= htmlentities( $area, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-followID='\nCONTENT;\n$return .= htmlentities( $id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-controller='core.front.core.followButton'>\n\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\" )->memberFollowButton( $app, $area, $id, $count, $small );\n$return .= <<<CONTENT\n\n<\/div>\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction memberFollowButton( $app, $area, $id, $count, $small=FALSE ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->following( $app, $area, $id ) ):\n$return .= <<<CONTENT\n\n\t\t<a href=\"\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=system&section=notifications&do=follow&follow_app={$app}&follow_area={$area}&follow_id={$id}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\" title=\"\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'following_this_member', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-ipsTooltip class=\"ipsButton ipsButton_positive \nCONTENT;\n\nif ( $small ):\n$return .= <<<CONTENT\nipsButton_fullWidth ipsButton_small\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n ipsType_blendLinks\" data-role=\"followButton\" data-ipsHover data-ipsHover-cache='false' data-ipsHover-onClick><i class='fa fa-check'><\/i><i class='fa fa-user'><\/i> \nCONTENT;\n\nif ( !$small ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'following_member', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n <i class='fa fa-caret-down'><\/i><\/a>\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\t\n\t\t<a href=\"\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=system&section=notifications&do=follow&follow_app={$app}&follow_area={$area}&follow_id={$id}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\" title=\"\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'follow_this_member', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-ipsTooltip class=\"ipsButton \nCONTENT;\n\nif ( $small ):\n$return .= <<<CONTENT\nipsButton_fullWidth ipsButton_small ipsButton_alternate\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nipsButton_primary\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n ipsType_blendLinks\" data-role=\"followButton\" data-ipsHover data-ipsHover-cache='false' data-ipsHover-onClick><i class='fa fa-plus'><\/i><i class='fa fa-user'><\/i> \nCONTENT;\n\nif ( !$small ):\n$return .= <<<CONTENT\n\n&nbsp;\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'follow_member', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/a>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction photoCrop( $name, $value, $photo ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div data-controller='core.front.profile.cropper' id='elPhotoCropper' class='ipsAreaBackground_light ipsType_center ipsPad'>\n\t<h3 class='ipsType_sectionHead'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'photo_crop_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t<p class='ipsType_light ipsType_reset'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'photo_crop_instructions', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/p>\n\t<br>\n\n\t<div data-role='cropper'>\n\t\t<img src=\"\nCONTENT;\n$return .= htmlentities( $photo, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-role='profilePhoto'>\n\t<\/div>\n\n\t<input type='hidden' name='\nCONTENT;\n$return .= htmlentities( $name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n[0]' value='\nCONTENT;\n$return .= htmlentities( $value[0], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-role='topLeftX'>\n\t<input type='hidden' name='\nCONTENT;\n$return .= htmlentities( $name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n[1]' value='\nCONTENT;\n$return .= htmlentities( $value[1], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-role='topLeftY'>\n\t<input type='hidden' name='\nCONTENT;\n$return .= htmlentities( $name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n[2]' value='\nCONTENT;\n$return .= htmlentities( $value[2], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-role='bottomRightX'>\n\t<input type='hidden' name='\nCONTENT;\n$return .= htmlentities( $name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n[3]' value='\nCONTENT;\n$return .= htmlentities( $value[3], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-role='bottomRightY'>\n<\/div>\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction profile( $member, $visitors, $sidebarFields, $mainFields, $statuses, $statusCount, $form, $nodes, $addWarningUrl, $followers=array(), $latestActivity ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\nCONTENT;\n\nif ( !\\IPS\\Request::i()->isAjax() ):\n$return .= <<<CONTENT\n\n<!-- When altering this template be sure to also check for similar in the hovercard -->\n<div data-controller='core.front.profile.main'>\n\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\", 'front' )->profileHeader( $member, false );\n$return .= <<<CONTENT\n\n\t<br>\n\n\t<div data-role=\"profileContent\">\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<div class='ipsColumns ipsColumns_collapseTablet' data-controller=\"core.front.profile.body\">\n\t\t\t<div class='ipsColumn ipsColumn_fixed ipsColumn_veryWide' id='elProfileInfoColumn'>\n\t\t\t\t<div class='ipsAreaBackground_light ipsPad'>\n\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->reputation_enabled and \\IPS\\Settings::i()->reputation_show_profile ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='cProfileSidebarBlock ipsBox ipsSpacer_bottom'>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->group['gbw_view_reps'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&id={$member->member_id}&do=reputation\", null, \"profile_reputation\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n\" data-action=\"repLog\" title=\"\nCONTENT;\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_reputation', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<div class='cProfileRepScore ipsPad_half \nCONTENT;\n\nif ( $member->pp_reputation_points > 1 ):\n$return .= <<<CONTENT\ncProfileRepScore_positive\nCONTENT;\n\nelseif ( $member->pp_reputation_points < 0 ):\n$return .= <<<CONTENT\ncProfileRepScore_negative\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\ncProfileRepScore_neutral\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\t\t<h2 class='ipsType_minorHeading'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_reputation', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t\t\t\t\t\t<span class='cProfileRepScore_points'>\nCONTENT;\n$return .= htmlentities( $member->pp_reputation_points, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->reputation() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<span class='cProfileRepScore_title'>\nCONTENT;\n$return .= htmlentities( $member->reputation(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->reputationImage() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<div class='ipsAreaBackground_reset ipsAreaBackground_rounded ipsPad_half ipsType_center'>\n\t\t\t\t\t\t\t\t\t\t\t<img src='\nCONTENT;\n$return .= htmlentities( $member->reputationImage(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' alt=''>\n\t\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->group['gbw_view_reps'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<p class='ipsType_reset ipsPad_half ipsType_right ipsType_light ipsType_small'>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_show_activity', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-right'><\/i>\n\t\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\n\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->warn_on AND ( \\IPS\\Member::loggedIn()->modPermission('mod_see_warn') or ( \\IPS\\Settings::i()->warn_show_own and \\IPS\\Member::loggedIn()->member_id == $member->member_id ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='cProfileSidebarBlock ipsBox ipsSpacer_bottom'>\n\t\t\t\t\t\t\t<div id='elWarningInfo' class='ipsPad \nCONTENT;\n\nif ( $member->mod_posts || $member->restrict_post || $member->temp_ban ):\n$return .= <<<CONTENT\nipsAreaBackground_negative\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n ipsClearfix'>\n\t\t\t\t\t\t\t\t<i class='ipsPos_left \nCONTENT;\n\nif ( $member->warn_level > 0 || $member->mod_posts || $member->restrict_post || $member->temp_ban ):\n$return .= <<<CONTENT\nfa fa-exclamation-triangle\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nfa fa-circle-o ipsType_light\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'><\/i>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<h2 class='ipsType_sectionHead'>\nCONTENT;\n$pluralize = array( $member->warn_level ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'member_warn_level', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( !$member->mod_posts && !$member->restrict_post && !$member->temp_ban ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<span>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_restrictions_applied', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<span>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'restrictions_applied', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->mod_posts ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<li data-ipsTooltip title=\"\nCONTENT;\n\nif ( $member->mod_posts == -1 ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'moderation_modq_perm', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n$sprintf = array(\\IPS\\DateTime::ts( $member->mod_posts )); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'moderation_modq_temp', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'moderation_modq', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->restrict_post ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<li data-ipsTooltip title=\"\nCONTENT;\n\nif ( $member->restrict_post == -1 ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'moderation_nopost_perm', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n$sprintf = array(\\IPS\\DateTime::ts( $member->restrict_post )); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'moderation_nopost_temp', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'moderation_nopost', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->temp_ban ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<li data-ipsTooltip title=\"\nCONTENT;\n\nif ( $member->temp_ban == -1 ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'moderation_banned_perm', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n$sprintf = array(\\IPS\\DateTime::ts( $member->temp_ban )); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'moderation_banned_temp', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'moderation_banned', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( ( \\IPS\\Member::loggedIn()->canWarn( $member ) || \\IPS\\Member::loggedIn()->modPermission('can_flag_as_spammer') ) and $member->member_id != \\IPS\\Member::loggedIn()->member_id  ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t\t\t<ul class='ipsList_inline'>\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->canWarn( $member ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlentities( $addWarningUrl, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' id='elWarnUserButton' data-ipsDialog data-ipsDialog-title=\"\nCONTENT;\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'warn_member', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\" class='ipsButton ipsButton_light ipsButton_verySmall' title='\nCONTENT;\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'warn_member', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'warn_user', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->modPermission('can_flag_as_spammer') and $member->member_id != \\IPS\\Member::loggedIn()->member_id ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->members_bitoptions['bw_is_spammer'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=moderation&id={$member->member_id}&s=0\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"flag_as_spammer\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_verySmall' title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_unflag', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-confirm data-confirmSubMessage=\"\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_unflag_confirm', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_unflag', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=moderation&id={$member->member_id}&s=1\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"flag_as_spammer\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_verySmall' title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_flag', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-confirm>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_flag', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( count( $member->warnings( 1 ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=warnings&id={$member->member_id}\", null, \"warn_list\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n' data-action=\"showRecentWarnings\" title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'see_recent_warnings', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\t\t<p class='ipsType_reset ipsPad_half ipsType_right ipsType_small ipsType_light ipsAreaBackground_light'>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'see_recent_warnings', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-down'><\/i>\n\t\t\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\t\t<div data-role=\"recentWarnings\" class='ipsPad_half ipsHide'>\n\t\t\t\t\t\t\t\t\t<ol class='ipsDataList'>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $member->warnings( 2 ) as $warning ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<li class=\"ipsDataItem\" id='elWarningOverview_\nCONTENT;\n$return .= htmlentities( $warning->id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='ipsDataItem_generic ipsDataItem_size1 ipsType_center'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=warnings&id={$member->member_id}&w={$warning->id}\", null, \"warn_view\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n\" data-ipsDialog data-ipsDialog-size='narrow' class=\"ipsType_blendLinks\" data-ipsTooltip title='\nCONTENT;\n$pluralize = array( $warning->points ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'wan_action_points', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"ipsPoints\">\nCONTENT;\n$return .= htmlentities( $warning->points, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='ipsDataItem_main'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=warnings&id={$member->member_id}&w={$warning->id}\", null, \"warn_view\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n\" data-ipsDialog data-ipsDialog-showFrom='#elWarningOverview_\nCONTENT;\n$return .= htmlentities( $warning->id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsDialog-size='narrow' class=\"ipsType_blendLinks\" title=''>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h4 class=\"ipsDataItem_title\">\nCONTENT;\n$val = \"core_warn_reason_{$warning->reason}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h4>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p class='ipsDataItem_meta ipsType_light'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$sprintf = array(\\IPS\\Member::load( $warning->moderator )->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'byline', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\nCONTENT;\n$val = ( $warning->date instanceof \\IPS\\DateTime ) ? $warning->date : \\IPS\\DateTime::ts( $warning->date );$return .= $val->html();\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<\/ol>\n\t\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t\t<p class='ipsType_reset ipsType_center ipsType_small'>\n\t\t\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=warnings&id={$member->member_id}\", null, \"warn_list\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_verySmall' title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'see_all_warnings', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsDialog data-ipsDialog-remoteVerify='false' data-ipsDialog-remoteSubmit='false' data-ipsDialog-title=\"\nCONTENT;\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_warnings', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'see_all_c', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nelseif ( \\IPS\\Member::loggedIn()->modPermission('can_flag_as_spammer') ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->members_bitoptions['bw_is_spammer'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=moderation&id={$member->member_id}&s=0\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"flag_as_spammer\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_verySmall ipsButton_fullWidth' title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_unflag', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-confirm data-confirmSubMessage=\"\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_unflag_confirm', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_unflag', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=moderation&id={$member->member_id}&s=1\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"flag_as_spammer\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_verySmall ipsButton_fullWidth' title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_flag', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-confirm>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'spam_flag', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\t\t\t\nCONTENT;\n\nif ( count( $followers ) || \\IPS\\Member::loggedIn()->member_id === $member->member_id ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='cProfileSidebarBlock ipsBox ipsSpacer_bottom' id='elFollowers' data-feedID='member-\nCONTENT;\n$return .= htmlentities( $member->member_id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-controller='core.front.profile.followers'>\n\t\t\t\t\t\t\t<h2 class=\"followers-title\"><span>My followers<\/span><\/h2>\n                          \nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\" )->followers( $member, $followers );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/div>\n\t \t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\t\t\t<div class='cProfileSidebarBlock ipsPad ipsBox ipsSpacer_bottom about-user-block'>\n\t\t\t\t\t\t<h2 class='ipsType_sectionHead ipsType_reset about-title'><span>\nCONTENT;\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_about', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/span><\/h2>\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->group['g_icon']  ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<div class='ipsType_center ipsPad_half'><img src='\nCONTENT;\n$return .= htmlentities( $member->group['g_icon'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' alt=''><\/div>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<ul class='ipsDataList ipsDataList_reducedSpacing cProfileFields'>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->isOnline() AND $member->location ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li class=\"ipsDataItem\">\n\t\t\t\t\t\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_size3 ipsType_break\"><strong>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'online_users_location_lang', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t\t\t\t\t\t<span class=\"ipsDataItem_main\">{$member->location()}<\/span>\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->member_title || $member->rank['title'] || $member->rank['image'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li class='ipsDataItem'>\n\t\t\t\t\t\t\t\t\t<span class='ipsDataItem_generic ipsDataItem_size3 ipsType_break'><strong>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_rank', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t\t\t\t\t\t<div class='ipsDataItem_generic'>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->member_title ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= htmlentities( $member->member_title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelseif ( $member->rank['title'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= htmlentities( $member->rank['title'], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t{$member->rank['image']}\n\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $member->birthday ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li class='ipsDataItem'>\n\t\t\t\t\t\t\t\t\t<span class='ipsDataItem_generic ipsDataItem_size3 ipsType_break'><strong>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'bday', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t\t\t\t\t\t<span class='ipsDataItem_generic'>\nCONTENT;\n$return .= htmlentities( $member->birthday, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nforeach ( $sidebarFields as $group => $fields ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( count( $fields ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='cProfileSidebarBlock ipsPad ipsBox ipsSpacer_bottom'>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $group != 'core_pfieldgroups_0' ):\n$return .= <<<CONTENT\n\n                               <h2 class='ipsType_sectionHead ipsType_reset'>\nCONTENT;\n$val = \"{$group}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n                            \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<ul class='ipsDataList ipsDataList_reducedSpacing cProfileFields'>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $fields as $field => $value ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<li class='ipsDataItem'>\n\t\t\t\t\t\t\t\t\t\t<span class='ipsDataItem_generic ipsDataItem_size3 ipsType_break'><strong>\nCONTENT;\n$val = \"{$field}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t\t\t\t\t\t\t<span class='ipsDataItem_generic'>{$value}<\/span>\n\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->modPermission('can_see_emails') ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='cProfileSidebarBlock ipsPad ipsBox ipsSpacer_bottom'>\n\t\t\t\t\t\t\t<h2 class='ipsType_sectionHead ipsType_reset'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_contact', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t\t\t\t<ul class='ipsDataList ipsDataList_reducedSpacing'>\n\t\t\t\t\t\t\t\t<li class='ipsDataItem'>\n\t\t\t\t\t\t\t\t\t<span class='ipsDataItem_generic ipsDataItem_size3'><strong>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_email', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t\t\t\t\t\t<span class='ipsDataItem_generic'><a href='mailto:\nCONTENT;\n$return .= htmlentities( $member->email, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'email_this_user', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= \\IPS\\Lang::wordbreak( htmlentities( $member->email, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ) );;\n$return .= <<<CONTENT\n<\/a><\/span>\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( !empty( $visitors ) || \\IPS\\Member::loggedIn()->member_id == $member->member_id ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='cProfileSidebarBlock ipsPad ipsBox ipsSpacer_bottom visitors-block' data-controller='core.front.profile.toggleBlock'>\n\t\t\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \\IPS\\Request::i()->app )->recentVisitorsBlock( $member, $visitors );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/div>\n\n\t\t\t<\/div>\n\t\t\t<section class='ipsColumn ipsColumn_fluid'>\n\t\t\t\t<div class='ipsBox'>\n\t\t\t\t\t<!-- Single status -->\n\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->canAccessModule( \\IPS\\Application\\Module::get( 'core', 'status' ) ) && \\IPS\\Request::i()->status && \\IPS\\Request::i()->type == 'status' && \\IPS\\Settings::i()->profile_comments and ( $member->pp_setting_count_comments or \\IPS\\Member::loggedIn()->member_id == $member->member_id ) ):\n$return .= <<<CONTENT\n\n\t \t\t\t\t\t<section data-controller='core.front.profile.toggleBlock' class='ipsPad'>\n\t\t\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\" )->statuses( $statuses, $statusCount, $form, $member );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/section>\n\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t<!-- Full profile content -->\n\t\t\t\t\t\t<div class='ipsTabs ipsTabs_small ipsClearfix' id='elProfileTabs' data-ipsTabBar data-ipsTabBar-stretch data-ipsTabBar-contentArea='#elProfileTabs_content'>\n\t\t\t\t\t\t\t<a href='#elProfileTabs' data-action='expandTabs'><i class='fa fa-caret-down'><\/i><\/a>\n\t\t\t\t\t\t\t<ul role=\"tablist\">\n\t\t\t\t\t\t\t\t<li role=\"presentation\">\n\t\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlentities( $member->url()->setQueryString( 'tab', 'activity' ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' id='elActivity' class='ipsTabs_item ipsType_center \nCONTENT;\n\nif ( ( !\\IPS\\Request::i()->tab && !\\IPS\\Request::i()->status ) || \\IPS\\Request::i()->tab == 'activity' ):\n$return .= <<<CONTENT\nipsTabs_activeItem\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' aria-selected='false'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'users_activity_feed', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->profile_comments AND \\IPS\\Member::loggedIn()->canAccessModule( \\IPS\\Application\\Module::get( 'core', 'status' ) ) and ( $member->pp_setting_count_comments or \\IPS\\Member::loggedIn()->member_id == $member->member_id ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t \t\t\t\t\t<li role=\"presentation\">\n\t\t\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlentities( $member->url()->setQueryString( 'tab', 'statuses' ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' id='elUpdates' class='ipsTabs_item ipsType_center \nCONTENT;\n\nif ( \\IPS\\Request::i()->tab == 'statuses' || \\IPS\\Request::i()->status ):\n$return .= <<<CONTENT\nipsTabs_activeItem\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' aria-selected='false'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'status_feed', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $mainFields as $group => $fields ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $fields as $field => $value ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $value ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<li role=\"presentation\">\n\t\t\t\t\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlentities( $member->url()->setQueryString( 'tab', 'field_' . $field ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' id='elField\nCONTENT;\n$return .= htmlentities( $field, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsTabs_item ipsType_center \nCONTENT;\n\nif ( \\IPS\\Request::i()->tab == 'field_' . $field ):\n$return .= <<<CONTENT\nipsTabs_activeItem\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' aria-selected='false'>\nCONTENT;\n$val = \"{$field}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $nodes as $type => $table ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $_table = (string) $table and $table->pages ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<li role=\"presentation\">\n\t\t\t\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlentities( $member->url()->setQueryString( 'tab', 'node_' . $type ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' id='elNode\nCONTENT;\n$return .= htmlentities( $type, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsTabs_item ipsType_center \nCONTENT;\n\nif ( \\IPS\\Request::i()->tab == 'node_' . $type ):\n$return .= <<<CONTENT\nipsTabs_activeItem\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' aria-selected='false'>\nCONTENT;\n$val = \"profile_{$type}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\t\t\t \t\t\t\t\n\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div id='elProfileTabs_content' class='ipsTabs_panels'>\n\t\t\t\t\t\t\t<div id=\"ipsTabs_elProfileTabs_elActivity_panel\" class='ipsTabs_panel ipsAreaBackground_reset ipsPad'>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( count( $latestActivity ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<h2 class='ipsType_pageTitle ipsSpacer_top'>\nCONTENT;\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'users_activity_feed_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/h2>\n\n\t\t\t\t\t\t\t\t\t<ol class='ipsDataList ipsDataList_large ipsSpacer_top cSearchActivity'>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $latestActivity as $activity ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$activityClass = get_class( $activity );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$activityParts = explode( '\\\\', $activityClass );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$application = $activityParts[1];\n$return .= <<<CONTENT\n\n\n\t\t\t\t\t\t\t\t\t\t\t<li class='ipsDataItem'>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='ipsDataItem_icon ipsType_center ipsPos_top ipsResponsive_hidePhone'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( $activity->author(), 'tiny' );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<br><br>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-\nCONTENT;\n$return .= htmlentities( $activity::$icon, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n ipsType_large ipsType_light\" title=\"\nCONTENT;\n$val = \"{$activity::$title}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-ipsTooltip><\/i>\n\t\t\t\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='ipsDataItem_main'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p class='ipsType_reset ipsType_break ipsContained ipsType_normal'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $activity instanceof \\IPS\\Content\\Comment or $activity instanceof \\IPS\\Content\\Review ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t  \t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$item = $activity->item();\n$return .= <<<CONTENT\n\n\t\t\t\t\t  \t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$sprintf = array($member->name); $htmlsprintf = array('<a href=\\'' . $activity->url() . '\\'>' . $activity->indefiniteArticle() . '<\/a>'); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'user_own_activity_comment', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf, 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n: <a href='\nCONTENT;\n$return .= htmlentities( $item->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlentities( $item->mapped('title'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t  \t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t  \t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$sprintf = array($member->name, $activity->indefiniteArticle()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'user_own_activity_item', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlentities( $activity->container()->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlentities( $activity->container()->_title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t  \t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t  \t\t\t\t\t\t\t\t\t<\/strong>\n\t\t\t\t\t  \t\t\t\t\t\t\t\t\t&nbsp;&nbsp;\n\t\t\t\t\t  \t\t\t\t\t\t\t\t\t<span class='ipsType_light ipsType_noBreak'>\nCONTENT;\n$val = ( $activity->mapped('date') instanceof \\IPS\\DateTime ) ? $activity->mapped('date') : \\IPS\\DateTime::ts( $activity->mapped('date') );$return .= $val->html();\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t  \t\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"$application\" )->snippet( $activity );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<\/ol>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<div class='ipsPad ipsType_center ipsType_large ipsType_light'>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_recent_activity', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/div>\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $mainFields as $group => $fields ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $fields as $field => $value ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $value ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<div id=\"ipsTabs_elProfileTabs_elField\nCONTENT;\n$return .= htmlentities( $field, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_panel\" class='ipsTabs_panel ipsAreaBackground_reset ipsPad'>\n\t\t\t\t\t\t\t\t\t\t\t<h2 class='ipsType_pageTitle ipsSpacer_top'>\nCONTENT;\n$val = \"{$field}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t\t\t\t\t\t\t\t<div class='ipsType_richText ipsType_normal ipsSpacer_top' data-controller='core.front.core.lightboxedImages'>\n\t\t\t\t\t\t\t\t\t\t\t\t{$value}\n\t\t\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $nodes as $type => $table ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $_table = (string) $table and $table->pages ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<div id=\"ipsTabs_elProfileTabs_elNode\nCONTENT;\n$return .= htmlentities( $type, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_panel\" class='ipsTabs_panel ipsAreaBackground_reset ipsPad'>\n\t\t\t\t\t\t\t\t\t\t{$_table}\n\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\n\t\t\t \t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->profile_comments AND \\IPS\\Member::loggedIn()->canAccessModule( \\IPS\\Application\\Module::get( 'core', 'status' ) ) and ( $member->pp_setting_count_comments or \\IPS\\Member::loggedIn()->member_id == $member->member_id ) ):\n$return .= <<<CONTENT\n\n\t\t\t \t\t\t\t\t<div id=\"ipsTabs_elProfileTabs_elUpdates_panel\" class='ipsTabs_panel ipsAreaBackground_reset ipsPad'>\n\t\t\t\t \t\t\t\t\t<section data-controller='core.front.profile.toggleBlock'>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\" )->statuses( $statuses, $statusCount, $form, $member );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<\/section>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/div>\n\t\t\t<\/section>\n\t\t<\/div>\n\nCONTENT;\n\nif ( !\\IPS\\Request::i()->isAjax() ):\n$return .= <<<CONTENT\n\n\t<\/div>\n<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction profileHeader( $member, $small=FALSE ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\nCONTENT;\n\n$coverPhoto = $member->coverPhoto();\n$return .= <<<CONTENT\n\n<header data-role=\"profileHeader\">\n\t<div class='ipsPageHead_special \nCONTENT;\n\nif ( $small === true ):\n$return .= <<<CONTENT\ncProfileHeaderMinimal\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' id='elProfileHeader' data-controller='core.front.core.coverPhoto' data-url=\"\nCONTENT;\n$return .= htmlentities( $member->url()->csrf(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-coverOffset='\nCONTENT;\n$return .= htmlentities( $coverPhoto->offset, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\nCONTENT;\n\nif ( $coverPhoto->file ):\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsCoverPhoto_container'>\n\t\t\t\t<img src='\nCONTENT;\n$return .= htmlentities( $coverPhoto->file, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsCoverPhoto_photo' alt=''>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->modPermission('can_modify_profiles') or ( \\IPS\\Member::loggedIn()->member_id == $member->member_id and $member->group['g_edit_profile'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t<ul class='ipsButton_split' id='elEditProfile' data-hideOnCoverEdit>\n\t\t\t\t<li>\n\t\t\t\t\t<a href='\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&do=edit&id={$member->member_id}\", \"front\", \"edit_profile\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_overlaid' data-ipsDialog data-ipsDialog-modal='true' data-ipsDialog-title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_edit', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t<i class='fa fa-pencil'><\/i>&nbsp;<span class='ipsResponsive_hidePhone ipsResponsive_inline'>&nbsp;&nbsp;\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_edit', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nif ( $coverPhoto->editable ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href='#elEditPhoto_menu' data-hideOnCoverEdit class='ipsButton ipsButton_overlaid' data-ipsMenu id='elEditPhoto' data-role='coverPhotoOptions'>\n\t\t\t\t\t\t\t<i class='fa fa-picture-o'><\/i>&nbsp;<span class='ipsResponsive_hidePhone ipsResponsive_inline'>&nbsp;&nbsp;\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_edit_cover_photo_tab', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-down'><\/i><\/span>\n\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t<ul class='ipsMenu ipsMenu_auto ipsHide' id='elEditPhoto_menu'>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $coverPhoto->file ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li class='ipsMenu_item' data-role=\"photoEditOption\">\n\t\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlentities( $member->url()->setQueryString( 'do', 'coverPhotoRemove' )->csrf(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-action='removeCoverPhoto'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cover_photo_remove', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t<li class='ipsMenu_item ipsHide' data-role=\"photoEditOption\">\n\t\t\t\t\t\t\t\t\t<a href='#' data-action='positionCoverPhoto'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cover_photo_reposition', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li class='ipsMenu_item'>\n\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlentities( $member->url()->setQueryString( 'do', 'coverPhotoUpload' ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsDialog data-ipsDialog-title=\"\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cover_photo_add', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cover_photo_add', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t\t\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<div class='ipsColumns ipsColumns_collapsePhone' data-hideOnCoverEdit>\n\t\t\t<div class='ipsColumn ipsColumn_fixed ipsColumn_narrow ipsPos_center' id='elProfilePhoto'>\n\t\t\t\t\nCONTENT;\n\nif ( $member->pp_main_photo and ( mb_substr( $member->pp_photo_type, 0, 5 ) === 'sync-' or $member->pp_photo_type === 'custom' ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlentities( $member->pp_main_photo, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-ipsLightbox class='ipsUserPhoto ipsUserPhoto_xlarge'>\t\t\t\t\t\n\t\t\t\t\t\t<img src='\nCONTENT;\n$return .= htmlentities( $member->photo, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' alt=''>\n\t\t\t\t\t<\/a>\n\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t<span class='ipsUserPhoto ipsUserPhoto_xlarge'>\t\t\t\t\t\n\t\t\t\t\t\t<img src='\nCONTENT;\n$return .= htmlentities( $member->photo, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' alt=''>\n\t\t\t\t\t<\/span>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->modPermission('can_modify_profiles') or ( \\IPS\\Member::loggedIn()->member_id == $member->member_id and $member->group['g_edit_profile'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<a href='\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&do=editPhoto&id={$member->member_id}\", \"front\", \"edit_profile_photo\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_verySmall ipsButton_light ipsButton_narrow' data-action='editPhoto' data-ipsDialog data-ipsDialog-modal='true' data-ipsDialog-title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_edit_photo_tab', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_edit_photo_tab', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsTooltip><i class='fa fa-photo'><\/i><\/a>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t\t<div class='ipsColumn ipsColumn_fluid'>\n\t\t\t\t<div class='ipsPos_left ipsPad cProfileHeader_name'>\n\t\t\t\t\t<h1 class='ipsType_reset'>\nCONTENT;\n$return .= htmlentities( $member->name, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/h1>\n\t\t\t\t\t<span>\nCONTENT;\n$return .= \\IPS\\Member\\Group::load( $member->member_group_id )->formattedName;\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t<\/div>\n\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id != $member->member_id ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<ul class='ipsList_inline ipsPad ipsResponsive_hidePhone ipsResponsive_block'>\n\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id != $member->member_id and ( !$member->members_bitoptions['pp_setting_moderate_followers'] or \\IPS\\Member::loggedIn()->following( 'core', 'member', $member->member_id ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\n$memberFollowers = $member->followers();\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li>\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\" )->memberFollow( 'core', 'member', $member->member_id, ( $memberFollowers === NULL ) ? 0 : $memberFollowers->count( TRUE ) );\n$return .= <<<CONTENT\n<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id && !$member->members_disable_pm and !\\IPS\\Member::loggedIn()->members_disable_pm ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li><a href='\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=messaging&controller=messenger&do=compose&to={$member->member_id}\", null, \"messenger_compose\", array(), 0 ) );\n$return .= <<<CONTENT\n' data-ipsDialog data-ipsDialog-title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'compose_new', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsDialog-remoteSubmit data-ipsDialog-flashMessage=\"\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'message_sent', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" class='ipsButton ipsButton_primary'><i class='fa fa-envelope'><\/i> <span class='ipsResponsive_showDesktop ipsResponsive_inline'>&nbsp; \nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'message_send', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span><\/a><\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/ul>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/div>\n\n\t<div class='ipsGrid ipsAreaBackground ipsPad ipsResponsive_showPhone ipsResponsive_block'>\n\t\t\nCONTENT;\n\n$span = 1;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id != $member->member_id and !$member->members_bitoptions['pp_setting_moderate_followers'] ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\n$span++;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id != $member->member_id && \\IPS\\Member::loggedIn()->member_id && !$member->members_disable_pm and !\\IPS\\Member::loggedIn()->members_disable_pm ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\n$span++;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id != $member->member_id and !$member->members_bitoptions['pp_setting_moderate_followers'] ):\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsGrid_span\nCONTENT;\n\nif ( $span == 1 ):\n$return .= <<<CONTENT\n12\nCONTENT;\n\nelseif ( $span == 2 ):\n$return .= <<<CONTENT\n6\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n4\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\nCONTENT;\n\n$memberFollowers = $member->followers();\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\" )->memberFollow( 'core', 'member', $member->member_id, ( $memberFollowers === NULL ) ? 0 : $memberFollowers->count( TRUE ), TRUE );\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id != $member->member_id && \\IPS\\Member::loggedIn()->member_id && !$member->members_disable_pm and !\\IPS\\Member::loggedIn()->members_disable_pm ):\n$return .= <<<CONTENT\n\n\t\t\t<a href='\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=messaging&controller=messenger&do=compose&to={$member->member_id}\", null, \"messenger_compose\", array(), 0 ) );\n$return .= <<<CONTENT\n' data-ipsDialog data-ipsDialog-title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'compose_new', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsDialog-remoteSubmit data-ipsDialog-flashMessage=\"\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'message_sent', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-ipsDialog-forceReload class='ipsGrid_span\nCONTENT;\n\nif ( $span == 1 ):\n$return .= <<<CONTENT\n12\nCONTENT;\n\nelseif ( $span == 2 ):\n$return .= <<<CONTENT\n6\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n4\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n ipsButton ipsButton_alternate ipsButton_small'><i class='\n\t\t\tfa fa-envelope'><\/i> <i class='fa fa-caret-right'><\/i><\/a>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<div data-role='switchView' class='ipsGrid_span\nCONTENT;\n\nif ( $span == 1 ):\n$return .= <<<CONTENT\n12\nCONTENT;\n\nelseif ( $span == 2 ):\n$return .= <<<CONTENT\n6\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n4\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t<div data-action=\"goToProfile\" data-type='phone' class='\nCONTENT;\n\nif ( $small != true ):\n$return .= <<<CONTENT\nipsHide\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t<a href='\nCONTENT;\n$return .= htmlentities( $member->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_light ipsButton_small ipsButton_fullWidth' title=\"\nCONTENT;\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_profile', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\"><i class='fa fa-user'><\/i><\/a>\n\t\t\t<\/div>\n\t\t\t<div data-action=\"browseContent\" data-type='phone' class='\nCONTENT;\n\nif ( $small == true ):\n$return .= <<<CONTENT\nipsHide\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t<a class=\"activity-button\" href=\"\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&do=edit&id={$member->member_id}\", \"front\", \"profile_content\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n\" class='ipsButton ipsButton_alternate ipsButton_small ipsButton_fullWidth'  title=\"\nCONTENT;\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_content', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\"><i class='fa fa-search'><\/i><\/a>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/div>\n\n\t<div id='elProfileStats' class='ipsClearfix'>\n\t\t<div data-role='switchView' class='ipsResponsive_hidePhone ipsResponsive_block'>\n\t\t\t<a href='\nCONTENT;\n$return .= htmlentities( $member->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_veryLight ipsButton_medium ipsPos_right \nCONTENT;\n\nif ( $small != true ):\n$return .= <<<CONTENT\nipsHide\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-action=\"goToProfile\" data-type='full' title=\"\nCONTENT;\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_profile', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\"><i class='fa fa-user'><\/i> <span class='ipsResponsive_showDesktop ipsResponsive_inline'>&nbsp;\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_view_profile', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span><\/a>\n\t\t\t<a href=\"\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&do=edit&id={$member->member_id}\", \"front\", \"profile_content\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n\" class='ipsButton ipsButton_light ipsButton_medium ipsPos_right \nCONTENT;\n\nif ( $small == true ):\n$return .= <<<CONTENT\nipsHide\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-action=\"browseContent\" data-type='full' title=\"\nCONTENT;\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_content', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\"><i class='fa fa-search'><\/i> <span class='ipsResponsive_showDesktop ipsResponsive_inline'>&nbsp;\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->member_id === $member->member_id ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_browse_my_content', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_browse_content', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/span><\/a>\n\t\t<\/div>\n\t\t<ul class='ipsList_inline ipsPos_left'>\n\t\t\t<li>\n\t\t\t\t<h4 class='ipsType_minorHeading'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_member_posts', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h4>\n\t\t\t\t\nCONTENT;\n$return .= htmlentities( $member->member_posts, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t<\/li>\n\t\t\t<li>\n\t\t\t\t<h4 class='ipsType_minorHeading'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'joined', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h4>\n\t\t\t\t\nCONTENT;\n$val = ( $member->joined instanceof \\IPS\\DateTime ) ? $member->joined : \\IPS\\DateTime::ts( $member->joined );$return .= $val->html();\n$return .= <<<CONTENT\n\n\t\t\t<\/li>\n\t\t\t<li>\n\t\t\t\t<h4 class='ipsType_minorHeading'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_last_visit', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h4>\n\t\t\t\t<span>\n\t\t\t\t\t\nCONTENT;\n\nif ( $member->isOnline() ):\n$return .= <<<CONTENT\n<i class=\"fa fa-circle ipsOnlineStatus_online\" data-ipsTooltip title='\nCONTENT;\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'online_now', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n'><\/i>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \nCONTENT;\n\nif ( $member->last_activity ):\n$return .= <<<CONTENT\n\nCONTENT;\n$val = ( $member->last_activity instanceof \\IPS\\DateTime ) ? $member->last_activity : \\IPS\\DateTime::ts( $member->last_activity );$return .= $val->html();\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'never', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/span>\n\t\t\t<\/li>\n\t\t<\/ul>\n\t<\/div>\n<\/header>\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction recentVisitorsBlock( $member, $visitors ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $member->members_bitoptions['pp_setting_count_visitors'] ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->modPermission('can_modify_profiles') or ( \\IPS\\Member::loggedIn()->member_id == $member->member_id and $member->group['g_edit_profile'] ) ):\n$return .= <<<CONTENT\n\n\t\t<a href='\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&do=visitors&id=$member->member_id\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"profile\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n' class='ipsType_light ipsType_normal ipsPos_right ipsFaded ipsFaded_more ipsFaded_withHover' data-ipsTooltip title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'hide_recent_visitors', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-action='disable'><i class='fa fa-times'><\/i><\/a>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t<h2 class='ipsType_sectionHead ipsType_reset about-user-block'>\n\t\t\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_recent_visitors', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t<\/h2>\n\t<br>\n\t<span class='ipsType_light'>\n\t\t\nCONTENT;\n$pluralize = array( $member->members_profile_views ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_views', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n\n\t<\/span>\n\t\nCONTENT;\n\nif ( count($visitors)  ):\n$return .= <<<CONTENT\n\n\t\t<ul class='ipsDataList ipsDataList_reducedSpacing ipsSpacer_top'>\n\t\t\nCONTENT;\n\nforeach ( $visitors as $visitor ):\n$return .= <<<CONTENT\n\n\t\t\t<li class='ipsDataItem'>\n\t\t\t\t<div class='ipsType_center ipsDataItem_icon'>\n\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( $visitor['member'], 'tiny' );\n$return .= <<<CONTENT\n\n\t\t\t\t<\/div>\n\t\t\t\t<div class='ipsDataItem_main'>\n\t\t\t\t\t<h3 class='ipsDataItem_title'>{$visitor['member']->link()}<\/h3>\n\t\t\t\t\t<p class='ipsDataItem_meta ipsType_light'>\nCONTENT;\n$val = ( $visitor['visit_time'] instanceof \\IPS\\DateTime ) ? $visitor['visit_time'] : \\IPS\\DateTime::ts( $visitor['visit_time'] );$return .= $val->html();\n$return .= <<<CONTENT\n<\/p>\n\t\t\t\t<\/div>\n\t\t\t<\/li>\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t<div class='ipsType_center ipsType_medium'>\n\t\t\t<p class='ipsType_light'>\n\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_recent_visitors', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t<\/p>\n\t\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t<h2 class='ipsType_sectionHead ipsType_reset visitors-title'>\n\t\t<span>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_recent_visitors', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t<\/h2>\n\t<div class='ipsType_center ipsType_medium'>\n\t\t<p class='ipsType_light'>\n\t\t\t\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'disabled_recent_visitors', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t<\/p>\n\t\t<a href='\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&do=visitors&id={$member->member_id}&state=1\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"profile\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n' class='' data-action='enable'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'enable', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction statusContainer( $status ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\t\t\t\t<li data-controller='core.front.profile.status' class=\"ipsComment ipsComment_parent ipsComment_hasChildren ipsClearfix\nCONTENT;\n\nif ( $status->hidden() ):\n$return .= <<<CONTENT\n ipsModerated\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" data-statusid=\"\nCONTENT;\n$return .= htmlentities( $status->id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t<a id='status-\nCONTENT;\n$return .= htmlentities( $status->id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><\/a>\n\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( $status->author(), 'small' );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<div class=\"ipsComment_content ipsFaded_withHover\">\n\t\t\t\t\t\t<h3 class=\"ipsComment_author ipsType_normal\"><strong>\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'front' )->userLink( $status->author() );\n$return .= <<<CONTENT\n<\/strong>\nCONTENT;\n\nif ( $status->member_id != $status->author()->member_id ):\n$return .= <<<CONTENT\n &raquo; <strong>\nCONTENT;\n$return .= \\IPS\\Member::load( $status->member_id )->link();\n$return .= <<<CONTENT\n<\/strong>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t\t\t<div class='ipsType_richText ipsContained'>\n\t\t\t\t\t\t\t{$status->content}\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<ul class=\"ipsList_inline ipsType_medium cStatusTools\">\n\t\t\t\t\t\t\t<li>\nCONTENT;\n\nif ( $status->locked() ):\n$return .= <<<CONTENT\n<i class='fa fa-lock'><\/i>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n <a class=\"ipsType_light\" href='\nCONTENT;\n$return .= htmlentities( $status->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$val = ( $status->date instanceof \\IPS\\DateTime ) ? $status->date : \\IPS\\DateTime::ts( $status->date );$return .= $val->html();\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $status instanceof \\IPS\\Content\\Reputation and \\IPS\\Settings::i()->reputation_enabled ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->reputationMini( $status );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $status->canDelete() || $status->canLock() || $status->canUnlock() || $status->canHide() || $status->canUnhide() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href='#elStatus_\nCONTENT;\n$return .= htmlentities( $status->id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_menu' data-ipsMenu data-ipsMenu-activeClass='ipsFaded_cancel' id='elStatus_\nCONTENT;\n$return .= htmlentities( $status->id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsFaded ipsFaded_more'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'options', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-down'><\/i><\/a>\n\t\t\t\t\t\t\t\t\t<ul class='ipsMenu ipsMenu_narrow ipsHide' id='elStatus_\nCONTENT;\n$return .= htmlentities( $status->id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_menu'>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( !$status->locked() and $status->canLock() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<li class='ipsMenu_item'><a href=\"\nCONTENT;\n$return .= htmlentities( $status->url('moderate')->setQueryString( 'action', 'lock' )->csrf(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'lock', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelseif ( $status->locked() and $status->canUnlock() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<li class='ipsMenu_item'><a href=\"\nCONTENT;\n$return .= htmlentities( $status->url('moderate')->setQueryString( 'action', 'unlock' )->csrf(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'unlock', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( !$status->hidden() and $status->canHide() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<li class='ipsMenu_item'><a href='\nCONTENT;\n$return .= htmlentities( $status->url('moderate')->setQueryString( 'action', 'hide' )->csrf(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'\">\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'hide', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelseif ( $status->hidden() and $status->canUnhide() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<li class='ipsMenu_item'><a href='\nCONTENT;\n$return .= htmlentities( $status->url('moderate')->setQueryString( 'action', 'unhide' )->csrf(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'unhide', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $status->canDelete() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t<li class='ipsMenu_item'><a data-confirm href=\"\nCONTENT;\n$return .= htmlentities( $status->url('moderate')->setQueryString( 'action', 'delete' )->csrf(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'delete', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( !\\IPS\\Member::loggedIn()->group['gbw_no_report'] and !$status->hidden() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li><a href='\nCONTENT;\n$return .= htmlentities( $status->url('report'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsDialog data-ipsDialog-size='medium' data-ipsDialog-title=\"\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'report', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-action='reportStatus' title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'report_content', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' class='ipsFaded ipsFaded_more'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'status_report', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nif ( !$status->hidden() && ( count( $status->comments() ) ||  \\IPS\\core\\Statuses\\Status::canCreate( \\IPS\\Member::loggedIn() ) )  ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='ipsComment_feed ipsComment_subComments ipsType_medium'>\n\t\t\t\t\t\t\t<ol class=\"ipsList_reset\" data-role='statusComments' data-currentPage='\nCONTENT;\n$return .= htmlspecialchars( \\IPS\\Request::i()->page ? intval( \\IPS\\Request::i()->page ) : 1, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \\IPS\\Request::i()->app )->statusReplies( $status );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/ol>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\core\\Statuses\\Status::canCreate( \\IPS\\Member::loggedIn() ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<div class=\"ipsComment ipsFieldRow_fullWidth ipsAreaBackground_light ipsPad\" data-role=\"replyComment\">\n\t\t\t\t\t\t\t\t\t<div class=\"ipsComment_content ipsContained\">\n\t\t\t\t\t\t\t\t\t\t{$status->commentForm()}\n\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\t\n\t\t\t\t<\/li>\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction statusContentRows( $table, $headers, $rows ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\nCONTENT;\n\nforeach ( $rows as $status ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\" )->statusContainer( $status );\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction statusPagination( $baseUrl, $pages, $comments, $activePage=1, $perPage=3, $direction='prev' ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $pages > 1 ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nif ( $direction == 'prev' && $activePage != $pages && !( $activePage > $pages ) ):\n$return .= <<<CONTENT\n\n\t\t<li class=\"ipsComment ipsClearfix cStatusUpdates_pagination\">\n\t\t\t<a href=\"\nCONTENT;\n$return .= htmlentities( $baseUrl->setQueryString( 'page', $activePage + 1 ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-action=\"loadPreviousComments\"><i class=\"fa fa-angle-up\"><\/i> \nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'show_prev_comments', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n &nbsp;<span class=\"ipsType_light\">\nCONTENT;\n$sprintf = array($comments - ( $activePage * $perPage )); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'x_more', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/span><\/a>\n\t\t<\/li>\n\t\nCONTENT;\n\nelseif ( $direction == 'next' && $activePage > 1 ):\n$return .= <<<CONTENT\n\n\t\t<li class=\"ipsComment ipsClearfix cStatusUpdates_pagination\">\n\t\t\t<a href=\"\nCONTENT;\n$return .= htmlentities( $baseUrl->setQueryString( 'page', $activePage - 1 ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-action=\"loadNextComments\"><i class=\"fa fa-angle-down\"><\/i> \nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'show_next_comments', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n &nbsp;<span class=\"ipsType_light\">\nCONTENT;\n$sprintf = array(( $activePage - 1 ) * $perPage); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'x_more', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/span><\/a>\n\t\t<\/li>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction statusReplies( $status ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( $status->commentPageCount() > 1 ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\", 'front' )->statusPagination( $status->url(), $status->commentPageCount(), $status->replies, \\IPS\\Request::i()->page ? intval( \\IPS\\Request::i()->page ) : 1, \\IPS\\core\\Statuses\\status::$commentsPerPage, 'prev' );\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nforeach ( $status->comments() as $comment ):\n$return .= <<<CONTENT\n\n\t{$comment->html()}\n\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( $status->commentPageCount() > 1 ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\", 'front' )->statusPagination( $status->url(), $status->commentPageCount(), $status->replies, \\IPS\\Request::i()->page ? intval( \\IPS\\Request::i()->page ) : 1, \\IPS\\core\\Statuses\\status::$commentsPerPage, 'next' );\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction statusReply( $status, $comment ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n<div class=\"ipsComment_content ipsFaded_withHover\" data-controller=\"core.front.core.comment\">\n\t<p class=\"ipsComment_author ipsType_normal\" itemprop=\"creator\" itemscope=\"\" itemtype=\"http:\/\/schema.org\/Person\"><strong>\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'front' )->userLink( $comment->author() );\n$return .= <<<CONTENT\n<\/strong><\/p>\n\t<div data-role=\"commentContent\" class='ipsType_richText ipsContained' data-controller='core.front.core.lightboxedImages'>\n\t\t{$comment->content}\n\t<\/div>\n\t<ul class=\"ipsList_inline ipsType_medium cStatusTools\">\n\t\t<li class=\"ipsType_light\">\nCONTENT;\n$val = ( $comment->date instanceof \\IPS\\DateTime ) ? $comment->date : \\IPS\\DateTime::ts( $comment->date );$return .= $val->html();\n$return .= <<<CONTENT\n<\/li>\n\t\t\nCONTENT;\n\nif ( $comment instanceof \\IPS\\Content\\Reputation and \\IPS\\Settings::i()->reputation_enabled ):\n$return .= <<<CONTENT\n\n\t\t\t<li>\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->reputationMini( $comment );\n$return .= <<<CONTENT\n<\/li>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( $comment->canDelete() || ( $comment instanceof \\IPS\\Content\\Hideable && ( !$comment->hidden() and $comment->canHide() ) || ( $comment->hidden() and $comment->canUnhide() ) )  ):\n$return .= <<<CONTENT\n\n\t\t\t<li>\n\t\t\t\t<a href='#elComment_\nCONTENT;\n$return .= htmlentities( $comment->id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_menu' id='elComment_\nCONTENT;\n$return .= htmlentities( $comment->id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsMenu data-ipsMenu-activeClass='ipsFaded_cancel' class='ipsFaded ipsFaded_more'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'options', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-down'><\/i><\/a>\n\t\t\t\t<ul class='ipsMenu ipsMenu_narrow ipsHide' id='elComment_\nCONTENT;\n$return .= htmlentities( $comment->id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_menu'>\n\t\t\t\t\t\nCONTENT;\n\nif ( $comment instanceof \\IPS\\Content\\Hideable ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( !$comment->hidden() and $comment->canHide() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li class='ipsMenu_item'><a href='\nCONTENT;\n$return .= htmlentities( $comment->url('moderate')->setQueryString( 'action', 'hide' )->csrf(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'hide', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nelseif ( $comment->hidden() and $comment->canUnhide() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li class='ipsMenu_item'><a href='\nCONTENT;\n$return .= htmlentities( $comment->url('moderate')->setQueryString( 'action', 'unhide' )->csrf(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'unhide', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nif ( $comment->canDelete() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li class='ipsMenu_item'><a data-confirm href='\nCONTENT;\n$return .= htmlentities( $comment->url('moderate')->setQueryString( 'action', 'delete' )->csrf(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-action='deleteComment' data-updateOnDelete=\"#commentCount\">\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'delete', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/ul>\n\t\t\t<\/li>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( $comment instanceof \\IPS\\Content\\ReportCenter and !\\IPS\\Member::loggedIn()->group['gbw_no_report'] and !$comment->hidden()  ):\n$return .= <<<CONTENT\n\n\t\t\t<li><a href='\nCONTENT;\n$return .= htmlentities( $comment->url('report'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsDialog data-ipsDialog-size='medium' data-ipsDialog-title=\"\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'report', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-action='reportComment' title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'report_content', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' class='ipsFaded ipsFaded_more'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'status_report', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/ul>\n<\/div>\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction statusReplyContainer( $status, $comment ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\nCONTENT;\n\n$idField = $comment::$databaseColumnId;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\n$itemClassSafe = str_replace( '\\\\', '_', mb_substr( $comment::$itemClass, 4 ) );\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( $comment->isIgnored() ):\n$return .= <<<CONTENT\n\n\t<li class='ipsComment ipsComment_ignored ipsPad_half ipsType_light' id='elIgnoreComment_\nCONTENT;\n$return .= htmlentities( $comment->$idField, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ignoreCommentID='elComment_\nCONTENT;\n$return .= htmlentities( $comment->$idField, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ignoreUserID='\nCONTENT;\n$return .= htmlentities( $comment->author()->member_id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\nCONTENT;\n$sprintf = array($comment->author()->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'status_ignoring', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t<\/li>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\t\n<li class=\"ipsComment ipsClearfix\nCONTENT;\n\nif ( $comment->hidden() ):\n$return .= <<<CONTENT\n ipsModerated\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \nCONTENT;\n\nif ( $comment->isIgnored() ):\n$return .= <<<CONTENT\nipsHide\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" data-commentid=\"\nCONTENT;\n$return .= htmlentities( $comment->id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" itemscope itemtype=\"http:\/\/schema.org\/Comment\">\n\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( $comment->author(), 'tiny' );\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\" )->statusReply( $status, $comment );\n$return .= <<<CONTENT\n\n<\/li>\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction statusRows( $table, $headers, $rows ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n<div data-role='commentFeed' class='\nCONTENT;\n\nif ( \\IPS\\Request::i()->do == 'content' ):\n$return .= <<<CONTENT\ncStatusUpdates ipsPad\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t<ol class='ipsType_normal ipsList_reset'>\n\t\t\nCONTENT;\n\nforeach ( $rows as $status ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\" )->statusContainer( $status );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/ol>\n<\/div>\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction statuses( $statuses, $count, $form, $member ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( $member->pp_setting_count_comments ):\n$return .= <<<CONTENT\n\n\t<h2 class='ipsType_pageTitle \nCONTENT;\n\nif ( !isset( \\IPS\\Request::i()->status ) ):\n$return .= <<<CONTENT\nipsSpacer_top\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\nCONTENT;\n\nif ( isset( \\IPS\\Request::i()->status ) ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'viewing_single_status', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'status_feed', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->modPermission('can_modify_profiles') or ( \\IPS\\Member::loggedIn()->member_id == $member->member_id and $member->group['g_edit_profile'] ) ):\n$return .= <<<CONTENT\n<a href='\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&do=statuses&id=$member->member_id&state=0\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"profile\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n' class='ipsType_light ipsPos_right ipsType_normal ipsFaded ipsFaded_more ipsFaded_withHover' data-ipsTooltip title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'hide_status_updates', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-action='disable'><i class='fa fa-times'><\/i><\/a>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/h2>\n\n\t\nCONTENT;\n\nif ( isset( \\IPS\\Request::i()->status ) ):\n$return .= <<<CONTENT\n\n\t\t<p class='ipsType_reset ipsType_normal ipsSpacer_bottom'>\n\t\t\t<a href='\nCONTENT;\n$return .= htmlentities( $member->url()->setQueryString( 'tab', 'statuses' ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><i class='fa fa-caret-left'><\/i> \nCONTENT;\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'see_all_statuses_by_x', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t<\/p>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t<div data-controller='core.front.profile.statusFeed' class='cStatusUpdates ipsSpacer_top'>\n\t\t\nCONTENT;\n\nif ( \\IPS\\core\\Statuses\\Status::canCreate( \\IPS\\Member::loggedIn() ) AND $form !== NULL ):\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsComposeArea ipsComposeArea_withPhoto ipsClearfix ipsSpacer_top' data-role='newStatus'>\n\t\t\t\t<div class='ipsPos_left ipsResponsive_hidePhone ipsResponsive_block'>\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( \\IPS\\Member::loggedIn(), 'small' );\n$return .= <<<CONTENT\n<\/div>\n\t\t\t\t<div class='ipsComposeArea_editor'>\n\t\t\t\t\t{$form}\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\t<br>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->pagination( \\IPS\\Http\\Url::internal( 'app=core&module=members&controller=profile&id=' . $member->member_id . '&tab=statuses', NULL, 'profile', $member->members_seo_name ), ceil( $count \/ 25 ), \\IPS\\Request::i()->statusPage ?: 1, 25, TRUE, 'statusPage' );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( $count > 25 ):\n$return .= <<<CONTENT\n\n\t\t<br><br>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<ol class='ipsType_normal ipsList_reset' data-role='commentFeed'>\n\t\t\t\nCONTENT;\n\nforeach ( $statuses as $status ):\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\" )->statusContainer( $status );\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t<\/ol>\n\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->pagination( \\IPS\\Http\\Url::internal( 'app=core&module=members&controller=profile&id=' . $member->member_id. '&tab=statuses', NULL, 'profile', $member->members_seo_name ), ceil( $count \/ 25 ), \\IPS\\Request::i()->statusPage ?: 1, 25, TRUE, 'statusPage' );\n$return .= <<<CONTENT\n\n\t<\/div>\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t<h2 class='ipsType_pageTitle'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'status_feed', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t<p class='ipsType_light ipsType_medium'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'disabled_status_updates', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&do=statuses&id=$member->member_id&state=1\" . \"&csrfKey=\" . \\IPS\\Session::i()->csrfKey, null, \"profile\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n' data-action='enable'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'enable_status_updates', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/p>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction tableRow( $table, $headers, $members ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\nCONTENT;\n\nforeach ( $members as $member ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\n$loadedMember = \\IPS\\Member::load( $member->member_id );\n$return .= <<<CONTENT\n\n\t<li class='ipsDataItem'>\n\t\t<div class='ipsDataItem_icon'>\n\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( $loadedMember, 'medium' );\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t\t<div class='ipsDataItem_main'>\n\t\t\t<h3 class='ipsType_sectionHead'>{$loadedMember->link()}<\/h3> \nCONTENT;\n\nif ( $loadedMember->isOnline() ):\n$return .= <<<CONTENT\n<i class=\"fa fa-circle ipsOnlineStatus_online\" data-ipsTooltip title='\nCONTENT;\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'online_now', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n'><\/i>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<br>\n\t\t\t<span class='ipsType_normal'>\nCONTENT;\n$return .= \\IPS\\Member\\Group::load( $member->member_group_id )->formattedName;\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<ul class='ipsList_inline ipsType_light'>\n\t\t\t\t<li><strong>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_member_posts', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n: \nCONTENT;\n$return .= htmlentities( $loadedMember->member_posts, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/strong><\/li>\n\t\t\t\t<li>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_joined', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n \nCONTENT;\n$val = ( $loadedMember->joined instanceof \\IPS\\DateTime ) ? $loadedMember->joined : \\IPS\\DateTime::ts( $loadedMember->joined );$return .= $val->html();\n$return .= <<<CONTENT\n<\/li>\n\t\t\t\t\nCONTENT;\n\nif ( $loadedMember->last_activity ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'members_last_visit', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n \nCONTENT;\n$val = ( $loadedMember->last_activity instanceof \\IPS\\DateTime ) ? $loadedMember->last_activity : \\IPS\\DateTime::ts( $loadedMember->last_activity );$return .= $val->html();\n$return .= <<<CONTENT\n<\/li>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t<\/div>\n\t\t\nCONTENT;\n\nif ( $table->canModerate() ):\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsDataItem_modCheck'>\n\t\t\t\t<input type='checkbox' data-role='moderation' name=\"moderate[\nCONTENT;\n$return .= htmlentities( $member->member_id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n]\" data-actions=\"\nCONTENT;\n$return .= htmlspecialchars( implode( ' ', $table->multimodActions( $member ) ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-state=''>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/li>\n\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction userContent( $member, $types, $currentAppModule, $currentType, $table ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\nCONTENT;\n\nif ( !\\IPS\\Request::i()->isAjax() ):\n$return .= <<<CONTENT\n\n<div data-controller='core.front.profile.main'>\n\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\", 'front' )->profileHeader( $member, true );\n$return .= <<<CONTENT\n\n\t<br>\n\t<div data-role=\"profileContent\">\n      123\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<div class=\"ipsColumns ipsColumns_collapsePhone\">\n\t\t\t<div class=\"ipsColumn ipsColumn_wide\">\n\t\t\t\t<div class=\"ipsSideMenu ipsAreaBackground_light ipsPad\" id=\"modcp_menu\" data-ipsTabBar data-ipsTabBar-contentArea='#elUserContent' data-ipsTabBar-itemselector=\".ipsSideMenu_item\" data-ipsTabBar-activeClass=\"ipsSideMenu_itemActive\" data-ipsSideMenu>\n\t\t\t\t\t<h3 class=\"ipsSideMenu_mainTitle ipsAreaBackground_light ipsType_medium\">\n\t\t\t\t\t\t<a href=\"#user_content\" class=\"ipsPad_double\" data-action=\"openSideMenu\"><i class=\"fa fa-bars\"><\/i> &nbsp;\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'user_content_type', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n&nbsp;<i class=\"fa fa-caret-down\"><\/i><\/a>\n\t\t\t\t\t<\/h3>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<ul class=\"ipsSideMenu_list\">\n\t\t\t\t\t\t\t<li><a href=\"\nCONTENT;\n$return .= htmlentities( $member->url()->setQueryString( array( 'do' => 'content', 'change_section' => 1 ) ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsSideMenu_item \nCONTENT;\n\nif ( !$currentType ):\n$return .= <<<CONTENT\nipsSideMenu_itemActive\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'all_activity', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $types as $app => $_types ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<h4 class='ipsSideMenu_subTitle'>\nCONTENT;\n$val = \"module__{$app}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h4>\n\t\t\t\t\t\t\t<ul class=\"ipsSideMenu_list\">\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $_types as $key => $class ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<li><a href=\"\nCONTENT;\n$return .= htmlentities( $member->url()->setQueryString( array( 'do' => 'content', 'type' => $key, 'change_section' => 1 ) ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class=\"ipsSideMenu_item \nCONTENT;\n\nif ( $currentType == $key ):\n$return .= <<<CONTENT\nipsSideMenu_itemActive\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\nCONTENT;\n$val = \"{$class::$title}_pl\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\t\t\t\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\t<div class=\"ipsColumn ipsColumn_fluid\" id='elUserContent'>\n\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\" )->userContentSection( $member, $types, $currentAppModule, $currentType, $table );\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t<\/div>\n\nCONTENT;\n\nif ( !\\IPS\\Request::i()->isAjax() ):\n$return .= <<<CONTENT\n\n\t<\/div>\n<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction userContentSection( $member, $types, $currentAppModule, $currentType, $table ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n<div class='ipsBox'>\n\t<h2 class='ipsType_sectionTitle ipsType_reset'>\nCONTENT;\n\nif ( !$currentAppModule ):\n$return .= <<<CONTENT\n\nCONTENT;\n$sprintf = array($member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'all_content_by_user', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n$sprintf = array(\\IPS\\Member::loggedIn()->language()->addToStack( $types[ $currentAppModule ][ $currentType ]::$title . '_pl' ), $member->name); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'content_by_user', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/h2>\n\t{$table}\n<\/div>\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction userContentStream( $member, $results, $pagination ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div data-baseurl=\"\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&do=content&id={$member->member_id}&page=1\", null, \"profile_content\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n\" data-resort=\"listResort\" data-tableid=\"topics\"> <!-- data-controller=\"core.global.core.table\" -->\n\t\nCONTENT;\n\nif ( $pagination ):\n$return .= <<<CONTENT\n\n\t\t<div class=\"ipsButtonBar ipsPad_half ipsClearfix ipsClear\">\n\t\t\t<div data-role=\"tablePagination\">\n\t\t\t\t{$pagination}\n\t\t\t<\/div>\n\t\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<ol class='ipsDataList ipsDataList_large cSearchActivity' data-role=\"tableRows\" itemscope itemtype=\"http:\/\/schema.org\/ItemList\">\n\t\t\nCONTENT;\n\nforeach ( $results as $activity ):\n$return .= <<<CONTENT\n\n\t\t\t{$activity->activityStreamHtml()}\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/ol>\n\t\nCONTENT;\n\nif ( $pagination ):\n$return .= <<<CONTENT\n\n\t\t<div class=\"ipsButtonBar ipsPad_half ipsClearfix ipsClear\">\n\t\t\t{$pagination}\n\t\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/div>\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction userReputation( $member, $types, $currentAppModule, $currentType, $table ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\nCONTENT;\n\nif ( !\\IPS\\Request::i()->isAjax() ):\n$return .= <<<CONTENT\n\n<div data-controller='core.front.profile.main'>\n\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\", 'front' )->profileHeader( $member, true );\n$return .= <<<CONTENT\n\n\t<br>\n\t<div data-role=\"profileContent\">\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<div class=\"ipsColumns ipsColumns_collapsePhone\">\n\t\t\t<aside class=\"ipsColumn ipsColumn_wide\">\n\t\t\t\t<div class=\"cProfileRepScore ipsPad_half \nCONTENT;\n\nif ( $member->pp_reputation_points > 1 ):\n$return .= <<<CONTENT\ncProfileRepScore_positive\nCONTENT;\n\nelseif ( $member->pp_reputation_points < 0 ):\n$return .= <<<CONTENT\ncProfileRepScore_negative\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\ncProfileRepScore_neutral\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t<h2 class='ipsType_minorHeading'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'profile_reputation', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t\t<span class='cProfileRepScore_points'>\nCONTENT;\n$return .= htmlentities( $member->pp_reputation_points, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\t\t\n\t\t\t\t<\/div>\n\t\t\t\t<br>\n\t\t\t\t<div class=\"ipsSideMenu ipsAreaBackground_light ipsPad\" data-ipsTabBar data-ipsTabBar-contentArea='#elUserReputation' data-ipsTabBar-itemselector=\".ipsSideMenu_item\" data-ipsTabBar-activeClass=\"ipsSideMenu_itemActive\" data-ipsSideMenu>\n\t\t\t\t\t<h3 class=\"ipsSideMenu_mainTitle ipsAreaBackground_light ipsType_medium\">\n\t\t\t\t\t\t<a href=\"#user_reputation\" class=\"ipsPad_double\" data-action=\"openSideMenu\"><i class=\"fa fa-bars\"><\/i> &nbsp;\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'user_content_type', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n&nbsp;<i class=\"fa fa-caret-down\"><\/i><\/a>\n\t\t\t\t\t<\/h3>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $types as $app => $_types ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<h4 class='ipsSideMenu_subTitle'>\nCONTENT;\n$val = \"module__{$app}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h4>\n\t\t\t\t\t\t\t<ul class=\"ipsSideMenu_list\">\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $_types as $key => $class ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<li><a href=\"\nCONTENT;\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=members&controller=profile&id={$member->member_id}&do=reputation&type={$key}&change_section=1\", null, \"profile_reputation\", array( $member->members_seo_name ), 0 ) );\n$return .= <<<CONTENT\n\" class=\"ipsSideMenu_item \nCONTENT;\n\nif ( $currentType == $key ):\n$return .= <<<CONTENT\nipsSideMenu_itemActive\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\nCONTENT;\n$val = \"{$class::$title}_pl\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\t\t\t\n\t\t\t\t<\/div>\n\t\t\t<\/aside>\n\t\t\t<section class=\"ipsColumn ipsColumn_fluid\">\n\t\t\t\t<div class='ipsBox'>\n\t\t\t\t\t<h2 class='ipsType_sectionTitle ipsType_reset'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t\t<div id='elUserReputation'>\n\t\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"profile\", \"core\" )->userReputationSection( $table );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t<\/section>\n\t\t<\/div>\n\nCONTENT;\n\nif ( !\\IPS\\Request::i()->isAjax() ):\n$return .= <<<CONTENT\n\n\t<\/div>\n<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\t\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction userReputationRows( $table, $headers, $rows ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\nCONTENT;\n\nif ( count( $rows ) ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nforeach ( $rows as $row ):\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( $row['obj'] ):\n$return .= <<<CONTENT\n\n\t\t\t<li class='ipsDataItem'>\t\t\n\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->reputation_point_types != 'like' ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<div class='ipsDataItem_generic ipsDataItem_size1'>\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $row['reputationData']['rep_rating'] === 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<span class='ipsButton ipsButton_large ipsButton_narrow ipsButton_rep ipsButton_repUp ipsButton_noHover cProfileRepLog_button'>\n\t\t\t\t\t\t\t\t<i class='fa fa-arrow-up'><\/i>\n\t\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<span class='ipsButton ipsButton_large ipsButton_narrow ipsButton_rep ipsButton_repDown ipsButton_noHover cProfileRepLog_button'>\n\t\t\t\t\t\t\t\t<i class='fa fa-arrow-down'><\/i>\n\t\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<div class='ipsDataItem_generic ipsDataItem_size2 ipsType_center ipsResponsive_hidePhone'>\n\t\t\t\t\t\nCONTENT;\n\nif ( $row['reputationData']['rep_member'] == \\IPS\\Request::i()->id ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( \\IPS\\Member::load( \\IPS\\Request::i()->id ), 'mini' );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( \\IPS\\Member::load( $row['reputationData']['rep_member'] ), 'mini' );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/div>\n\t\t\t\t<div class='ipsDataItem_main'>\n\t\t\t\t\t<span class=''>\n\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Settings::i()->reputation_point_types != 'like' ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $row['obj'] instanceof \\IPS\\Content\\Comment or $row['obj'] instanceof \\IPS\\Content\\Review ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$item = $row['obj']->item();\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $row['reputationData']['rep_member'] != \\IPS\\Request::i()->id ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n$htmlsprintf = array(\\IPS\\Member::load( $row['reputationData']['rep_member_received'] )->link(), \\IPS\\Member::load( $row['reputationData']['rep_member'] )->link()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_rate_comment_received', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlentities( $item->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlentities( $item->mapped('title'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $row['reputationData']['rep_member_received'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$htmlsprintf = array(\\IPS\\Member::load( $row['reputationData']['rep_member'] )->link(), \\IPS\\Member::load( $row['reputationData']['rep_member_received'] )->link()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_rate_comment_gave', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlentities( $item->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlentities( $item->mapped('title'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$htmlsprintf = array(\\IPS\\Member::load( $row['reputationData']['rep_member'] )->link()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_rate_comment_gave_no_recipient', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlentities( $item->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlentities( $item->mapped('title'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $row['reputationData']['rep_member'] != \\IPS\\Request::i()->id ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n$htmlsprintf = array(\\IPS\\Member::load( $row['reputationData']['rep_member_received'] )->link(), \\IPS\\Member::load( $row['reputationData']['rep_member'] )->link(), $row['obj']->indefiniteArticle()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_rate_item_received', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlentities( $row['obj']->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlentities( $row['obj']->mapped('title'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $row['reputationData']['rep_member_received'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$htmlsprintf = array(\\IPS\\Member::load( $row['reputationData']['rep_member'] )->link(), \\IPS\\Member::load( $row['reputationData']['rep_member_received'] )->link(), $row['obj']->indefiniteArticle()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_rate_item_gave', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlentities( $row['obj']->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlentities( $row['obj']->mapped('title'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$htmlsprintf = array(\\IPS\\Member::load( $row['reputationData']['rep_member'] )->link(), $row['obj']->indefiniteArticle()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_rate_item_gave_no_recipient', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlentities( $row['obj']->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlentities( $row['obj']->mapped('title'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $row['obj'] instanceof \\IPS\\Content\\Comment or $row['obj'] instanceof \\IPS\\Content\\Review ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$item = $row['obj']->item();\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $row['reputationData']['rep_member_received'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$htmlsprintf = array(\\IPS\\Member::load( $row['reputationData']['rep_member'] )->link(), $row['obj']->indefiniteArticle(), \\IPS\\Member::load( $row['reputationData']['rep_member_received'] )->link()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_like_comment', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlentities( $item->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlentities( $item->mapped('title'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$htmlsprintf = array(\\IPS\\Member::load( $row['reputationData']['rep_member'] )->link(), $row['obj']->indefiniteArticle()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_like_comment_no_recipient', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlentities( $item->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlentities( $item->mapped('title'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $row['reputationData']['rep_member_received'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$htmlsprintf = array(\\IPS\\Member::load( $row['reputationData']['rep_member'] )->link(), $row['obj']->indefiniteArticle(), \\IPS\\Member::load( $row['reputationData']['rep_member_received'] )->link()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_like_item', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlentities( $row['obj']->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlentities( $row['obj']->mapped('title'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n$htmlsprintf = array(\\IPS\\Member::load( $row['reputationData']['rep_member'] )->link(), $row['obj']->indefiniteArticle()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replog_like_item_no_recipient', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlentities( $row['obj']->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlentities( $row['obj']->mapped('title'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/strong>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/span>\n\t\t\t\t\t<span class='ipsType_light ipsType_medium'>&nbsp;&nbsp;\nCONTENT;\n$val = ( $row['reputationData']['rep_date'] instanceof \\IPS\\DateTime ) ? $row['reputationData']['rep_date'] : \\IPS\\DateTime::ts( $row['reputationData']['rep_date'] );$return .= $val->html();\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t<br>\n\t\t\t\t\t\nCONTENT;\n\nif ( $row['obj']->truncated() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='ipsType_medium ipsType_richText cProfileRepLog_text' data-ipsTruncate data-ipsTruncate-type='remove' data-ipsTruncate-size='2 lines'>\n\t\t\t\t\t\t\t{$row['obj']->truncated()}\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/div>\n\t\t\t<\/li>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction userReputationSection( $table ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<section class='ipsDataList ipsDataList_large'>\n\t{$table}\n<\/section>\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction userReputationTable( $table, $headers, $rows, $quickSearch ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n<div data-baseurl='\nCONTENT;\n$return .= htmlentities( $table->baseUrl, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-resort='\nCONTENT;\n$return .= htmlentities( $table->resortKey, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-controller='core.global.core.table\nCONTENT;\n\nif ( $table->canModerate() ):\n$return .= <<<CONTENT\n,core.front.core.moderation\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' \nCONTENT;\n\nif ( $table->getPaginationKey() != 'page' ):\n$return .= <<<CONTENT\ndata-pageParam='\nCONTENT;\n$return .= htmlentities( $table->getPaginationKey(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t\nCONTENT;\n\nif ( $table->title ):\n$return .= <<<CONTENT\n\n\t\t<h2 class='ipsType_sectionTitle ipsType_reset ipsClear'>\nCONTENT;\n$val = \"{$table->title}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\nCONTENT;\n\nif ( $table->showAdvancedSearch AND ( (isset( $table->sortOptions ) and !empty( $table->sortOptions )) OR $table->advancedSearch ) OR !empty( $table->filters ) OR $table->pages > 1 ):\n$return .= <<<CONTENT\n\n\t<div class=\"ipsButtonBar ipsPad_half ipsClearfix ipsClear\">\n\t\t<ul class=\"ipsButtonRow ipsPos_right ipsClearfix\">\n\t\t\t\nCONTENT;\n\nif ( $table->showAdvancedSearch AND ( ( isset( $table->sortOptions ) and count( $table->sortOptions ) > 1 ) OR $table->advancedSearch ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li>\n\t\t\t\t\t\nCONTENT;\n\nif ( isset($table->sortOptions)  ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<a href=\"#elSortByMenu_menu\" id=\"elSortByMenu_\nCONTENT;\n$return .= htmlentities( $table->uniqueId, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-role=\"sortButton\" data-ipsMenu data-ipsMenu-activeClass=\"ipsButtonRow_active\" data-ipsMenu-selectable=\"radio\">\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'sort_by', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class=\"fa fa-caret-down\"><\/i><\/a>\n\t\t\t\t\t<ul class=\"ipsMenu ipsMenu_auto ipsMenu_withStem ipsMenu_selectable ipsHide\" id=\"elSortByMenu_\nCONTENT;\n$return .= htmlentities( $table->uniqueId, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_menu\">\n\t\t\t\t\t\t\t\nCONTENT;\n\n$custom = TRUE;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $table->sortOptions as $k => $col ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li class=\"ipsMenu_item \nCONTENT;\n\nif ( $col === $table->sortBy ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$custom = FALSE;\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" data-ipsMenuValue=\"\nCONTENT;\n$return .= htmlentities( $col, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-sortDirection='\nCONTENT;\n\nif ( $col == 'title' ):\n$return .= <<<CONTENT\nasc\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\ndesc\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'><a href=\"\nCONTENT;\n$return .= htmlentities( $table->baseUrl->setQueryString( array( 'filter' => $table->filter, 'sortby' => $col, 'sortdirection' => ( $col == 'title' ) ? 'asc' : 'desc', 'page' => '1' ) ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n$val = \"{$table->langPrefix}sort_{$k}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a><\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $table->advancedSearch ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li class=\"ipsMenu_item \nCONTENT;\n\nif ( $custom ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" data-noSelect=\"true\">\n\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlentities( $table->baseUrl->setQueryString( array( 'advancedSearchForm' => '1', 'filter' => $table->filter, 'sortby' => $table->sortBy, 'sortdirection' => $table->sortDirection ) ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsDialog data-ipsDialog-title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'custom_sort', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'custom', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/ul>\n\t\t\t\t\t\nCONTENT;\n\nelseif ( $table->advancedSearch ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlentities( $table->baseUrl->setQueryString( array( 'advancedSearchForm' => '1', 'filter' => $table->filter, 'sortby' => $table->sortBy, 'sortdirection' => $table->sortDirection ) ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsDialog data-ipsDialog-title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'custom_sort', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'custom', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( !empty( $table->filters ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"#elFilterByMenu_\nCONTENT;\n$return .= htmlentities( $table->uniqueId, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_menu\" data-role=\"tableFilterMenu\" id=\"elFilterByMenu_\nCONTENT;\n$return .= htmlentities( $table->uniqueId, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-ipsMenu data-ipsMenu-activeClass=\"ipsButtonRow_active\" data-ipsMenu-selectable=\"radio\">\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'filter_by', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class=\"fa fa-caret-down\"><\/i><\/a>\n\t\t\t\t\t<ul class='ipsMenu ipsMenu_auto ipsMenu_withStem ipsMenu_selectable ipsHide' id='elFilterByMenu_\nCONTENT;\n$return .= htmlentities( $table->uniqueId, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_menu'>\n\t\t\t\t\t\t<li data-action=\"tableFilter\" data-ipsMenuValue='' class='ipsMenu_item \nCONTENT;\n\nif ( !$table->filter ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlentities( $table->baseUrl->setQueryString( array( 'filter' => '', 'sortby' => $table->sortBy, 'sortdirection' => $table->sortDirection, 'page' => '1' ) ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$val = \"{$table->langPrefix}all\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $table->filters as $k => $q ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li data-action=\"tableFilter\" data-ipsMenuValue='\nCONTENT;\n$return .= htmlentities( $k, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsMenu_item \nCONTENT;\n\nif ( $k === $table->filter ):\n$return .= <<<CONTENT\nipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlentities( $table->baseUrl->setQueryString( array( 'filter' => $k, 'sortby' => $table->sortBy, 'sortdirection' => $table->sortDirection, 'page' => '1' ) ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$val = \"{$table->langPrefix}{$k}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/ul>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t\t\n\t\t\nCONTENT;\n\nif ( $table->pages > 1 ):\n$return .= <<<CONTENT\n\n\t\t\t<div data-role=\"tablePagination\">\n\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->pagination( $table->baseUrl, $table->pages, $table->page, $table->limit, TRUE, $table->getPaginationKey() );\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\nCONTENT;\n\nif ( count( $rows ) ):\n$return .= <<<CONTENT\n\n\t\t<ol class='ipsDataList ipsClear \nCONTENT;\n\nforeach ( $table->classes as $class ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlentities( $class, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n \nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n' id='elTable_\nCONTENT;\n$return .= htmlentities( $table->uniqueId, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-role=\"tableRows\" itemscope itemtype=\"http:\/\/schema.org\/ItemList\">\n\t\t\t\nCONTENT;\n$return .= $table->rowsTemplate[0]->{$table->rowsTemplate[1]}( $table, $headers, $rows );\n$return .= <<<CONTENT\n\n\t\t<\/ol>\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t<div class='ipsType_center ipsPad'>\n\t\t\t<p class='ipsType_large'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_rows_in_table', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/p>\n\t\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\n\t\nCONTENT;\n\nif ( $table->pages > 1 ):\n$return .= <<<CONTENT\n\n\t<div class=\"ipsButtonBar ipsPad_half ipsClearfix ipsClear\">\n\t\t<div data-role=\"tablePagination\">\n\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->pagination( $table->baseUrl, $table->pages, $table->page, $table->limit, TRUE, $table->getPaginationKey() );\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/div>\nCONTENT;\n\t\treturn $return;\n}}"