"namespace IPS\\Theme;\nclass class_forums_front_widgets\n{\n\t\t\tfunction featuredTopics( $topics, $orientation='vertical' ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\nCONTENT;\n\nif ( !empty( $topics )  ):\n$return .= <<<CONTENT\n\n<h3 class='ipsWidget_title ipsType_reset'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'block_featuredTopics', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\n\nCONTENT;\n\nif ( $orientation == 'vertical' ):\n$return .= <<<CONTENT\n\n<div class='ipsPad_half ipsWidget_inner'>\n\n\t<ul class='ipsDataList ipsDataList_reducedSpacing'>\n\t\t\nCONTENT;\n\nforeach ( $topics as $topic ):\n$return .= <<<CONTENT\n\n\t\t<li class='ipsDataItem\nCONTENT;\n\nif ( $topic->unread() ):\n$return .= <<<CONTENT\n ipsDataItem_unread\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $topic->hidden() ):\n$return .= <<<CONTENT\n ipsModerated\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t<div class='ipsDataItem_icon ipsPos_top'>\n\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( $topic->author(), 'tiny' );\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t\t<div class='ipsDataItem_main'>\n\t\t\t\t<div class=\"ipsCommentCount ipsPos_right \nCONTENT;\n\nif ( ( $topic->posts - 1 ) === 0 ):\n$return .= <<<CONTENT\nipsFaded\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" data-ipsTooltip title='\nCONTENT;\n$pluralize = array( $topic->posts - 1 ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replies_number', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $topic->posts - 1, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/div>\n\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlentities( $topic->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" title='\nCONTENT;\n$sprintf = array($topic->title); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'view_this_topic', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' class='ipsDataItem_title ipsType_break'>\nCONTENT;\n$return .= \\IPS\\Lang::wordbreak( htmlentities( $topic->title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ) );;\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\nCONTENT;\n\nif ( $topic->mapped('featured') || $topic->hidden() === -1 || $topic->hidden() === 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $topic->hidden() === -1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<span class=\"ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning\" data-ipsTooltip title='\nCONTENT;\n$return .= htmlentities( $topic->hiddenBlurb(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><i class='fa fa-eye-slash'><\/i><\/span>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelseif ( $topic->hidden() === 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<span class=\"ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning\" data-ipsTooltip title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'pending_approval', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><i class='fa fa-warning'><\/i><\/span>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $topic->mapped('featured') ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<span class=\"ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_positive\" data-ipsTooltip title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'featured', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><i class='fa fa-star'><\/i><\/span>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<\/span>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<br>\n\t\t\t\t<span class='ipsType_light ipsType_small'>\nCONTENT;\n$htmlsprintf = array($topic->author()->link()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'byline_nodate', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n &middot; \nCONTENT;\n$htmlsprintf = array(\\IPS\\DateTime::ts( $topic->mapped('date') )->html()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'topic_started_date', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<\/div>\n\t\t<\/li>\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/ul>\n<\/div>\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n<div class='ipsWidget_inner'>\n\t<ul class='ipsDataList'>\n\t\t\nCONTENT;\n\nforeach ( $topics as $topic ):\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"forums\" )->row( NULL, NULL, $topic, FALSE );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/ul>\n<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction forumStatistics( $stats, $orientation='vertical' ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n<h3 class='ipsType_reset ipsWidget_title'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'block_forumStatistics', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n<div class='ipsWidget_inner'>\n\t\nCONTENT;\n\nif ( $orientation == 'vertical' ):\n$return .= <<<CONTENT\n\n\t\t<div class='ipsPad_half'>\n\t\t\t<ul class='ipsDataList'>\n\t\t\t\t<li class='ipsDataItem'>\n\t\t\t\t\t<div class='ipsDataItem_main ipsPos_middle'>\n\t\t\t\t\t\t<strong>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'total_topics', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong>\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class='ipsDataItem_stats ipsDataItem_statsLarge'>\n\t\t\t\t\t\t<span class='ipsDataItem_stats_number'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->formatNumber( $stats['total_topics'] );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/li>\n\t\t\t\t<li class='ipsDataItem'>\n\t\t\t\t\t<div class='ipsDataItem_main ipsPos_middle'>\n\t\t\t\t\t\t<strong>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'total_posts', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong>\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class='ipsDataItem_stats ipsDataItem_statsLarge'>\n\t\t\t\t\t\t<span class='ipsDataItem_stats_number'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->formatNumber( $stats['total_posts'] );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/li>\n\t\t\t<\/ul>\n\t\t<\/div>\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t<div class='ipsGrid ipsGrid_collapsePhone ipsWidget_stats'>\n\t\t\t<div class='ipsGrid_span6 ipsType_center'>\n\t\t\t\t<span class='ipsType_large ipsWidget_statsCount'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->formatNumber( $stats['total_topics'] );\n$return .= <<<CONTENT\n<\/span><br>\n\t\t\t\t<span class='ipsType_light ipsType_medium'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'total_topics', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<\/div>\n\t\t\t<div class='ipsGrid_span6 ipsType_center'>\n\t\t\t\t<span class='ipsType_large ipsWidget_statsCount'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->formatNumber( $stats['total_posts'] );\n$return .= <<<CONTENT\n<\/span><br>\n\t\t\t\t<span class='ipsType_light ipsType_medium'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'total_posts', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<\/div>\n\t\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/div>\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction hotTopics( $topics, $orientation='vertical' ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\nCONTENT;\n\nif ( !empty( $topics )  ):\n$return .= <<<CONTENT\n\n\t<h3 class='ipsWidget_title ipsType_reset'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'block_hotTopics', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\n\t\nCONTENT;\n\nif ( $orientation == 'vertical' ):\n$return .= <<<CONTENT\n\n\t\t<div class='ipsPad_half ipsWidget_inner'>\n\t\t\t<ul class='ipsDataList ipsDataList_reducedSpacing'>\n\t\t\t\t\nCONTENT;\n\nforeach ( $topics as $topic ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li class='ipsDataItem\nCONTENT;\n\nif ( $topic->unread() ):\n$return .= <<<CONTENT\n ipsDataItem_unread\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $topic->hidden() ):\n$return .= <<<CONTENT\n ipsModerated\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t<div class='ipsDataItem_icon ipsPos_top'>\n\t\t\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( $topic->author(), 'tiny' );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div class='ipsDataItem_main'>\n\t\t\t\t\t\t\t<div class=\"ipsCommentCount ipsPos_right \nCONTENT;\n\nif ( ( $topic->posts - 1 ) === 0 ):\n$return .= <<<CONTENT\nipsFaded\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" data-ipsTooltip title='\nCONTENT;\n$pluralize = array( $topic->posts - 1 ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replies_number', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $topic->posts - 1, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/div>\n\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlentities( $topic->url()->setQueryString( 'do', 'getLastComment' ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" title='\nCONTENT;\n$sprintf = array($topic->title); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'view_this_topic', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' class='ipsDataItem_title ipsType_break'>\nCONTENT;\n$return .= \\IPS\\Lang::wordbreak( htmlentities( $topic->title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ) );;\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $topic->mapped('featured') || $topic->hidden() === -1 || $topic->hidden() === 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $topic->hidden() === -1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<span class=\"ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning\" data-ipsTooltip title='\nCONTENT;\n$return .= htmlentities( $topic->hiddenBlurb(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><i class='fa fa-eye-slash'><\/i><\/span>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelseif ( $topic->hidden() === 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<span class=\"ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning\" data-ipsTooltip title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'pending_approval', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><i class='fa fa-warning'><\/i><\/span>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $topic->mapped('featured') ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<span class=\"ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_positive\" data-ipsTooltip title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'featured', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><i class='fa fa-star'><\/i><\/span>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t<span class='ipsType_light ipsType_small'>\nCONTENT;\n$htmlsprintf = array($topic->author()->link()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'byline_nodate', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n &middot; \nCONTENT;\n$val = ( $topic->mapped('date') instanceof \\IPS\\DateTime ) ? $topic->mapped('date') : \\IPS\\DateTime::ts( $topic->mapped('date') );$return .= $val->html();\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t<\/div>\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t<div class='ipsWidget_inner'>\n\t\t\t<ul class='ipsDataList'>\n\t\t\t\t\nCONTENT;\n\nforeach ( $topics as $topic ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"forums\" )->row( NULL, NULL, $topic, FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction latestTopics( $topics, $orientation='vertical' ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\nCONTENT;\n\nif ( !empty( $topics )  ):\n$return .= <<<CONTENT\n\n\t<h3 class='ipsWidget_title ipsType_reset'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'block_latestTopics', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\n\t\nCONTENT;\n\nif ( $orientation == 'vertical' ):\n$return .= <<<CONTENT\n\n\t\t<div class='ipsPad_half ipsWidget_inner'>\n\t\t\t<ul class='ipsDataList ipsDataList_reducedSpacing'>\n\t\t\t\t\nCONTENT;\n\nforeach ( $topics as $topic ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li class='ipsDataItem\nCONTENT;\n\nif ( $topic->unread() ):\n$return .= <<<CONTENT\n ipsDataItem_unread\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $topic->hidden() ):\n$return .= <<<CONTENT\n ipsModerated\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t<div class='ipsDataItem_icon ipsPos_top'>\n\t\t\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( $topic->author(), 'tiny' );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div class='ipsDataItem_main'>\n\t\t\t\t\t\t\t<div class=\"ipsCommentCount ipsPos_right \nCONTENT;\n\nif ( ( $topic->posts - 1 ) === 0 ):\n$return .= <<<CONTENT\nipsFaded\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" data-ipsTooltip title='\nCONTENT;\n$pluralize = array( $topic->posts - 1 ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replies_number', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $topic->posts - 1, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/div>\n\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlentities( $topic->url()->setQueryString( 'do', 'getLastComment' ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" title='\nCONTENT;\n$sprintf = array($topic->title); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'view_this_topic', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' class='ipsDataItem_title ipsType_break'>\nCONTENT;\n$return .= \\IPS\\Lang::wordbreak( htmlentities( $topic->title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ) );;\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $topic->mapped('featured') || $topic->hidden() === -1 || $topic->hidden() === 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $topic->hidden() === -1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<span class=\"ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning\" data-ipsTooltip title='\nCONTENT;\n$return .= htmlentities( $topic->hiddenBlurb(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><i class='fa fa-eye-slash'><\/i><\/span>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelseif ( $topic->hidden() === 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<span class=\"ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning\" data-ipsTooltip title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'pending_approval', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><i class='fa fa-warning'><\/i><\/span>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $topic->mapped('featured') ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<span class=\"ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_positive\" data-ipsTooltip title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'featured', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><i class='fa fa-star'><\/i><\/span>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t<span class='ipsType_light ipsType_small'>\nCONTENT;\n$htmlsprintf = array($topic->author()->link()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'byline_nodate', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n &middot; \nCONTENT;\n$htmlsprintf = array(\\IPS\\DateTime::ts( $topic->mapped('date') )->html()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'topic_started_date', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t<\/div>\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t<div class='ipsWidget_inner'>\n\t\t\t<ul class='ipsDataList'>\n\t\t\t\t\nCONTENT;\n\nforeach ( $topics as $topic ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"forums\" )->row( NULL, NULL, $topic, FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction postFeed( $comments, $orientation='vertical' ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\nCONTENT;\n\nif ( !empty( $comments )  ):\n$return .= <<<CONTENT\n\n\t<h3 class='ipsType_reset ipsWidget_title'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'block_postFeed_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\nCONTENT;\n\nif ( $orientation == 'vertical' ):\n$return .= <<<CONTENT\n\n\t\t<div class='ipsWidget_inner ipsPad_half'>\n\t\t\t<ul class='ipsDataList ipsDataList_reducedSpacing'>\n\t\t\t\t\nCONTENT;\n\nforeach ( $comments as $comment ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li class='ipsDataItem'>\n\t\t\t\t\t\t<div class='ipsDataItem_icon ipsPos_top'>\n\t\t\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( $comment->author(), 'tiny' );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div class='ipsDataItem_main'>\n\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlentities( $comment->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" title='\nCONTENT;\n$sprintf = array($comment->item()->title); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'view_this_topic', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' class='ipsDataItem_title ipsType_break'>\nCONTENT;\n$return .= \\IPS\\Lang::wordbreak( htmlentities( $comment->item()->title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ) );;\n$return .= <<<CONTENT\n<\/a><br>\n\t\t\t\t\t\t\t<span class='ipsType_light ipsType_small'>\nCONTENT;\n$htmlsprintf = array($comment->author()->link()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'byline_nodate', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n &middot; {$comment->dateLine()}<\/span>\n\t\t\t\t\t\t\t<div class='ipsType_small ipsType_textBlock ipsType_richText ipsType_break' data-ipsTruncate data-ipsTruncate-type='remove' data-ipsTruncate-size='\nCONTENT;\n\nif ( $orientation == 'vertical' ):\n$return .= <<<CONTENT\n6 lines\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n2 lines\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\t{$comment->truncated( true )}\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t<\/div>\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t<div class='ipsWidget_inner'>\n\t\t\t<ul class='ipsDataList'>\n\t\t\t\t\nCONTENT;\n\nforeach ( $comments as $comment ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<div class='ipsComment_header ipsPhotoPanel ipsPhotoPanel_mini'>\n\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( $comment->author(), 'mini', $comment->warningRef() );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p class='ipsPos_right ipsType_reset ipsType_blendLinks'>\n\t\t\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlentities( $comment->item()->url()->setQueryString( array( 'do' => 'findComment', 'comment' => $comment->id ) ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsTooltip title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'share_this_comment', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsMenu data-ipsMenu-closeOnClick='false' id='elShareComment_\nCONTENT;\n$return .= htmlentities( $comment->id, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><i class='fa fa-share-alt'><\/i><\/a>\n\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t<h3 class='ipsComment_author ipsType_blendLinks'>\n\t\t\t\t\t\t\t<strong class='ipsType_normal'>\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userLink( $comment->author(), $comment->warningRef() );\n$return .= <<<CONTENT\n<\/strong>\n\t\t\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->reputationBadge( $comment->author() );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/h3>\n\t\t\t\t\t\t<p class='ipsComment_meta ipsType_light ipsType_medium'>\n\t\t\t\t\t\t\t{$comment->dateLine()}\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $comment->editLine() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t(\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'edited_lc', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n)\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $comment->hidden() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t&middot; \nCONTENT;\n$return .= htmlentities( $comment->hiddenBlurb(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $comment instanceof \\IPS\\Content\\ReportCenter and !\\IPS\\Member::loggedIn()->group['gbw_no_report'] and $comment->hidden() !== 1  ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t&middot; <a href='\nCONTENT;\n$return .= htmlentities( $comment->url('report'), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsDialog data-ipsDialog-remoteSubmit data-ipsDialog-size='medium' data-ipsDialog-flashMessage='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'report_submit_success', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-ipsDialog-title=\"\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'report', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-action='reportComment' title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'report_content', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'report', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/p>\n\t\t\t\n\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->modPermission('mod_see_warn') and $comment->warning ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->commentWarned( $comment );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\n\t\t\t\t<div class='ipsPad'>\n\t\t\t\t\t\nCONTENT;\n\nif ( in_array( 'IPS\\Content\\Reputation', class_implements( $comment ) ) and \\IPS\\Settings::i()->reputation_highlight and $comment->reputation() >= \\IPS\\Settings::i()->reputation_highlight ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<strong class='ipsComment_popularFlag' data-ipsTooltip title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'this_is_a_popular_comment', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><i class='fa fa-star'><\/i><\/strong>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlentities( $comment->url(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" title='\nCONTENT;\n$sprintf = array($comment->item()->title); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'view_this_topic', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' class='ipsDataItem_title ipsType_break'>\nCONTENT;\n$return .= \\IPS\\Lang::wordbreak( htmlentities( $comment->item()->title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ) );;\n$return .= <<<CONTENT\n<\/a><br>\n\t\t\t\t\t<div data-role='commentContent' class='ipsType_normal ipsType_richText ipsType_break ipsContained' data-controller='core.front.core.lightboxedImages'>\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $comment->hidden() === 1 && $comment->author()->member_id == \\IPS\\Member::loggedIn()->member_id ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<strong class='ipsType_medium ipsType_warning'><i class='fa fa-info-circle'><\/i> \nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'comment_awaiting_approval', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t{$comment->content()}\n\t\t\t\t\t\t\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $comment->editLine() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t{$comment->editLine()}\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\n\t\t\t\t\t\n\t\t\t\t\t\nCONTENT;\n\nif ( $comment->hidden() !== 1 && $comment instanceof \\IPS\\Content\\Reputation and \\IPS\\Settings::i()->reputation_enabled ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->reputation( $comment, 'ipsPos_right ipsResponsive_noFloat' );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/div>\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\t\treturn $return;\n}\n\n\tfunction topicFeed( $topics, $orientation='vertical' ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\nCONTENT;\n\nif ( !empty( $topics )  ):\n$return .= <<<CONTENT\n\n\t<h3 class='ipsWidget_title ipsType_reset'>\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'block_topicFeed_title', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\n\t\nCONTENT;\n\nif ( $orientation == 'vertical' ):\n$return .= <<<CONTENT\n\n\t\t<div class='ipsPad_half ipsWidget_inner'>\n\t\t\t<ul class='ipsDataList ipsDataList_reducedSpacing'>\n\t\t\t\t\nCONTENT;\n\nforeach ( $topics as $topic ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li class='ipsDataItem\nCONTENT;\n\nif ( $topic->unread() ):\n$return .= <<<CONTENT\n ipsDataItem_unread\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $topic->hidden() ):\n$return .= <<<CONTENT\n ipsModerated\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t<div class='ipsDataItem_icon ipsPos_top'>\n\t\t\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\" )->userPhoto( $topic->author(), 'tiny' );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div class='ipsDataItem_main'>\n\t\t\t\t\t\t\t<div class=\"ipsCommentCount ipsPos_right \nCONTENT;\n\nif ( ( $topic->posts - 1 ) === 0 ):\n$return .= <<<CONTENT\nipsFaded\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" data-ipsTooltip title='\nCONTENT;\n$pluralize = array( $topic->posts - 1 ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'replies_number', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n$return .= htmlspecialchars( $topic->posts - 1, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/div>\n\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlentities( $topic->url()->setQueryString( 'do', 'getLastComment' ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" title='\nCONTENT;\n$sprintf = array($topic->title); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'view_this_topic', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n' class='ipsDataItem_title ipsType_break'>\nCONTENT;\n$return .= \\IPS\\Lang::wordbreak( htmlentities( $topic->title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ) );;\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $topic->mapped('featured') || $topic->hidden() === -1 || $topic->hidden() === 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $topic->hidden() === -1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<span class=\"ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning\" data-ipsTooltip title='\nCONTENT;\n$return .= htmlentities( $topic->hiddenBlurb(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><i class='fa fa-eye-slash'><\/i><\/span>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelseif ( $topic->hidden() === 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<span class=\"ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_warning\" data-ipsTooltip title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'pending_approval', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><i class='fa fa-warning'><\/i><\/span>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $topic->mapped('featured') ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<span class=\"ipsBadge ipsBadge_icon ipsBadge_small ipsBadge_positive\" data-ipsTooltip title='\nCONTENT;\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'featured', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><i class='fa fa-star'><\/i><\/span>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t<span class='ipsType_light ipsType_small'>\nCONTENT;\n$htmlsprintf = array($topic->author()->link()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'byline_nodate', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n &middot; \nCONTENT;\n$htmlsprintf = array(\\IPS\\DateTime::ts( $topic->mapped('date') )->html()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'topic_started_date', \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t<\/div>\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t<div class='ipsWidget_inner'>\n\t\t\t<ul class='ipsDataList'>\n\t\t\t\t\nCONTENT;\n\nforeach ( $topics as $topic ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"forums\", 'front' )->row( NULL, NULL, $topic, FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\t\treturn $return;\n}}"